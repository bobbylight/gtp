{"version":3,"sources":["gtp/FadeOutInState.ts"],"names":["gtp","gtp.FadeOutInState","gtp.FadeOutInState.constructor","gtp.FadeOutInState.update","gtp.FadeOutInState.render","gtp.FadeOutInState._setState"],"mappings":"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","file":"gtp/FadeOutInState.js","sourcesContent":["module gtp {\r\n\t'use strict';\r\n\r\n\texport class FadeOutInState extends gtp.State {\r\n\r\n\t\tprivate _leavingState: State;\r\n\t\tprivate _enteringState: State;\r\n\t\tprivate _transitionLogic: Function;\r\n\t\tprivate _fadingOut: boolean;\r\n\t\tprivate _alpha: number;\r\n\t\tprivate _halfTime: number;\r\n\t\tprivate _curTime: number;\r\n\r\n\t\t/**\r\n\t\t * Fades one state out and another state in.\r\n\t\t * \r\n\t\t * @constructor\r\n\t\t */\r\n\t\tconstructor(leavingState: gtp.State, enteringState: State,\r\n\t\t\ttransitionLogic?: Function, timeMillis?: number) {\r\n\t\t\tsuper();\r\n\t\t\tthis._leavingState = leavingState;\r\n\t\t\tthis._enteringState = enteringState;\r\n\t\t\tthis._transitionLogic = transitionLogic;\r\n\t\t\tthis._fadingOut = true;\r\n\t\t\tthis._alpha = 1;\r\n\t\t\tthis._halfTime = timeMillis && timeMillis > 0 ? timeMillis / 2 : 800;\r\n\t\t\tthis._curTime = 0;\r\n\t\t}\r\n\r\n\t\tupdate(delta: number) {\r\n        \r\n\t\t\tsuper.update(delta);\r\n\t\t\t//         console.log('delta === ' + delta);\r\n\t\t\tthis._curTime += delta;\r\n\t\t\tif(this._curTime >= this._halfTime) {\r\n\t\t\t\tthis._curTime -= this._halfTime;\r\n\t\t\t\tif (this._fadingOut) {\r\n\t\t\t\t\tthis._fadingOut = false;\r\n\t\t\t\t\tif (this._transitionLogic) {\r\n\t\t\t\t\t\tthis._transitionLogic();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._setState(this._enteringState);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this._fadingOut) {\r\n\t\t\t\tthis._alpha = 1 - (this._curTime / this._halfTime);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._alpha = (this._curTime / this._halfTime);\r\n\t\t\t}\r\n\t\t}\r\n   \r\n\t\trender(ctx: CanvasRenderingContext2D) {\r\n\r\n\t\t\tsuper.render(ctx);\r\n\t\t\tthis.game.clearScreen();\r\n\r\n\t\t\tvar previousAlpha = ctx.globalAlpha;\r\n\t\t\tctx.globalAlpha = this._alpha;\r\n\t\t\tif (this._fadingOut) {\r\n\t            this._leavingState.render(ctx);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t            this._enteringState.render(ctx);\r\n\t\t\t}\r\n\t\t\tctx.globalAlpha = previousAlpha;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Sets the new game state.  This is a hook for subclasses to perform\r\n\t\t * extra logic.\r\n\t\t *\r\n\t\t * @param state The new state.\r\n\t\t */\r\n\t\tprivate _setState(state: State) {\r\n\t\t\tthis.game.setState(this._enteringState);\r\n\t\t}\r\n\t}\r\n}"],"sourceRoot":"/source/"}