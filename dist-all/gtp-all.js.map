{"version":3,"sources":["gtp/AssetLoader.ts","gtp/AssetType.ts","gtp/AudioSystem.ts","gtp/BitmapFont.ts","gtp/BrowserUtil.ts","gtp/Delay.ts","gtp/FadeOutInState.ts","gtp/Game.ts","gtp/Image.ts","gtp/ImageAtlas.ts","gtp/ImageUtils.ts","gtp/InputManager.ts","gtp/Keys.ts","gtp/Point.ts","gtp/Pool.ts","gtp/Rectangle.ts","gtp/Sound.ts","gtp/SpriteSheet.ts","gtp/State.ts","gtp/Timer.ts","gtp/Utils.ts","gtp/_GameTimer.ts","tiled/TiledLayer.ts","tiled/TiledMap.ts","tiled/TiledObject.ts","tiled/TiledTileset.ts"],"names":["gtp","gtp.AssetLoader","gtp.AssetLoader.constructor","gtp.AssetLoader.addJson","gtp.AssetLoader.addCanvas","gtp.AssetLoader.addImage","gtp.AssetLoader.addSound","gtp.AssetLoader.addSpriteSheet","gtp.AssetLoader.addTmxMap","gtp.AssetLoader.getTmxTilesetImage","gtp.AssetLoader.get","gtp.AssetLoader._isAlreadyTracked","gtp.AssetLoader.set","gtp.AssetLoader._completed","gtp.AssetLoader.isDoneLoading","gtp.AssetLoader.onLoad","gtp.AssetType","gtp.PlayingSound","gtp.PlayingSound.constructor","gtp.PlayingSound._initFromConfig","gtp.PlayingSound.pause","gtp.PlayingSound.resume","gtp.PlayingSound.start","gtp.AudioSystem","gtp.AudioSystem.constructor","gtp.AudioSystem._createPlayingSound","gtp.AudioSystem._createSoundEffectId","gtp.AudioSystem.init","gtp.AudioSystem.addSound","gtp.AudioSystem.fadeOutMusic","gtp.AudioSystem.getCurrentMusic","gtp.AudioSystem.isInitialized","gtp.AudioSystem.pauseAll","gtp.AudioSystem.playMusic","gtp.AudioSystem.playSound","gtp.AudioSystem._removePlayingSound","gtp.AudioSystem.resumeAll","gtp.AudioSystem.stopMusic","gtp.AudioSystem.stopSound","gtp.AudioSystem.toggleMuted","gtp.AudioSystem.fadeMusic","gtp.AudioSystem.musicFadeSeconds","gtp.BitmapFont","gtp.BitmapFont.constructor","gtp.BitmapFont.drawString","gtp.BrowserUtil","gtp.BrowserUtil.constructor","gtp.BrowserUtil.getWindowLocationSearch","gtp.Delay","gtp.Delay.constructor","gtp.Delay.update","gtp.Delay.getLoopCount","gtp.Delay.getMaxDelta","gtp.Delay.getMinDelta","gtp.Delay.getRemaining","gtp.Delay.getRemainingPercent","gtp.Delay.isDone","gtp.Delay.setRandomDelta","gtp.Delay.reset","gtp.Delay.toString","gtp.FadeOutInState","gtp.FadeOutInState.constructor","gtp.FadeOutInState.update","gtp.FadeOutInState.render","gtp.FadeOutInState._setState","gtp.Game","gtp.Game.constructor","gtp.Game.clearScreen","gtp.Game.getHeight","gtp.Game.getWidth","gtp.Game.paused","gtp.Game.playTime","gtp.Game.randomInt","gtp.Game.render","gtp.Game._renderFps","gtp.Game._renderStatusMessage","gtp.Game.resetPlayTime","gtp.Game.setState","gtp.Game.setStatusMessage","gtp.Game.start","gtp.Game._tick","gtp.Game.toggleMuted","gtp.Game.toggleShowFps","gtp.Game.update","gtp.Image","gtp.Image.constructor","gtp.Image._ensure256Square","gtp.Image.draw","gtp.Image.drawScaled","gtp.Image.drawScaled2","gtp.Image.makeColorTranslucent","gtp.Image.width","gtp.Image.height","gtp.ImageAtlas","gtp.ImageAtlas.constructor","gtp.ImageAtlas.parse","gtp.ImageUtils","gtp.ImageUtils.constructor","gtp.ImageUtils.resize","gtp.ImageUtils.createCanvas","gtp.ImageUtils.prepCanvas","gtp.ImageUtils.makeColorTranslucent","gtp.InputManager","gtp.InputManager.constructor","gtp.InputManager.clearKeyState","gtp.InputManager.clearKeyStates","gtp.InputManager.ctrl","gtp.InputManager.down","gtp.InputManager.enter","gtp.InputManager.install","gtp.InputManager.isKeyDown","gtp.InputManager._keyDown","gtp.InputManager._keyUp","gtp.InputManager.left","gtp.InputManager.right","gtp.InputManager.shift","gtp.InputManager.up","gtp.Keys","gtp.Point","gtp.Point.constructor","gtp.Point.equals","gtp.Pool","gtp.Pool.constructor","gtp.Pool.borrowObj","gtp.Pool.borrowedCount","gtp.Pool.reset","gtp.Pool.returnObj","gtp.Pool.length","gtp.Pool.toString","gtp.Rectangle","gtp.Rectangle.constructor","gtp.Rectangle.containsRect","gtp.Rectangle.intersects","gtp.Rectangle.set","gtp.Sound","gtp.Sound.constructor","gtp.Sound.getBuffer","gtp.Sound.getId","gtp.Sound.getLoopsByDefaultIfMusic","gtp.Sound.setLoopsByDefaultIfMusic","gtp.Sound.getLoopStart","gtp.Sound.setLoopStart","gtp.SpriteSheet","gtp.SpriteSheet.constructor","gtp.SpriteSheet.drawSprite","gtp.SpriteSheet.drawByIndex","gtp.State","gtp.State.constructor","gtp.State.enter","gtp.State.leaving","gtp.State.update","gtp.State.render","gtp.Timer","gtp.Timer.constructor","gtp.Timer.setLogPrefix","gtp.Timer.start","gtp.Timer.end","gtp.Timer.endAndLog","gtp.Utils","gtp.Utils.constructor","gtp.Utils.getObjectSize","gtp.Utils.getRequestParam","gtp.Utils.hitch","gtp.Utils.mixin","gtp.Utils.randomInt","gtp.Utils.timestamp","gtp.Utils.initConsole","gtp._GameTimer","gtp._GameTimer.constructor","gtp._GameTimer.paused","gtp._GameTimer.playTime","gtp._GameTimer.updating","gtp._GameTimer.resetPlayTime","gtp._GameTimer.start","tiled","tiled.TiledLayer","tiled.TiledLayer.constructor","tiled.TiledLayer.getData","tiled.TiledLayer.setData","tiled.TiledLayer._getIndex","tiled.TiledLayer.getObjectByName","tiled.TiledLayer.getObjectIntersecting","tiled.TiledLayer.isObjectGroup","tiled.TiledLayer._setObjects","tiled.TiledMap","tiled.TiledMap.constructor","tiled.TiledMap.addLayer","tiled.TiledMap.draw","tiled.TiledMap.getLayer","tiled.TiledMap.getLayerByIndex","tiled.TiledMap.getLayerCount","tiled.TiledMap._getImageForGid","tiled.TiledMap.drawTile","tiled.TiledMap.setScale","tiled.TiledMap.getPixelWidth","tiled.TiledMap.getPixelHeight","tiled.TiledMap.removeLayer","tiled.TiledObject","tiled.TiledObject.constructor","tiled.TiledObject.intersects","tiled.TiledTileset","tiled.TiledTileset.constructor","tiled.TiledTileset.setScale"],"mappings":"AAAA,IAAO,GAAG,CAsWT;AAtWD,WAAO,GAAG,EAAC,CAAC;IACXA,YAAYA,CAACA;IAMbA;;;;;;;;;;;;;;;OAeGA;IACHA;QAUCC;;;;;;;;;WASGA;QACHA,qBAAYA,KAAiBA,EAAEA,KAAsBA,EAAEA,SAAkBA;YAA7DC,qBAAiBA,GAAjBA,SAAiBA;YAC5BA,IAAIA,CAACA,MAAMA,GAAGA,KAAKA,IAAIA,CAACA,CAACA;YACzBA,IAAIA,CAACA,gBAAgBA,GAAGA,EAAEA,CAACA;YAC3BA,IAAIA,CAACA,SAASA,GAAGA,EAAEA,CAACA;YACpBA,IAAIA,CAACA,QAAQA,GAAGA,IAAIA,CAACA;YACrBA,IAAIA,CAACA,KAAKA,GAAGA,KAAKA,CAACA;YACnBA,IAAIA,CAACA,UAAUA,GAAGA,SAASA,CAACA;QAC7BA,CAACA;QAEDD;;;;;WAKGA;QACHA,6BAAOA,GAAPA,UAAQA,EAAUA,EAAEA,GAAgBA;YAAhBE,mBAAgBA,GAAhBA,QAAgBA;YAEnCA,EAAEA,CAACA,CAACA,IAAIA,CAACA,UAAUA,CAACA,CAACA,CAACA;gBACrBA,GAAGA,GAAGA,IAAIA,CAACA,UAAUA,GAAGA,GAAGA,CAACA;YAC7BA,CAACA;YAEDA,EAAEA,CAACA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA;gBAChCA,MAAMA,CAACA;YACRA,CAACA;YACDA,IAAIA,CAACA,gBAAgBA,CAACA,EAAEA,CAACA,GAAGA,EAAEA,IAAIA,EAAEA,GAAGA,CAACA,SAASA,CAACA,IAAIA,EAAEA,CAACA;YACzDA,OAAOA,CAACA,GAAGA,CAACA,UAAUA,GAAGA,EAAEA,GAAGA,MAAMA,GAAGA,GAAGA;gBACzCA,iBAAiBA,GAAGA,GAAGA,CAACA,KAAKA,CAACA,aAAaA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA;gBAClEA,gBAAgBA,GAAGA,CAACA,IAAIA,CAACA,QAAQA,KAAKA,IAAIA,CAACA,CAACA,CAACA;YAE9CA,IAAMA,IAAIA,GAAgBA,IAAIA,CAACA;YAC/BA,IAAMA,GAAGA,GAAmBA,IAAIA,cAAcA,EAAEA,CAACA;YACjDA,GAAGA,CAACA,kBAAkBA,GAAGA;gBACxB,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,KAAK,CAAC,CAAC,CAAC,CAAC;oBAC1B,IAAM,QAAQ,GAAW,GAAG,CAAC,YAAY,CAAC;oBAC1C,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;gBAC/B,CAAC;YACF,CAAC,CAACA;YAEFA,GAAGA,CAACA,IAAIA,CAACA,KAAKA,EAAEA,GAAGA,EAAEA,IAAIA,CAACA,CAACA;YAC3BA,GAAGA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA;QAEhBA,CAACA;QAEDF;;;;WAIGA;QACHA,+BAASA,GAATA,UAAUA,EAAUA,EAAEA,QAAgBA;YAGrCG,EAAEA,CAACA,CAACA,IAAIA,CAACA,UAAUA,CAACA,CAACA,CAACA;gBACrBA,QAAQA,GAAGA,IAAIA,CAACA,UAAUA,GAAGA,QAAQA,CAACA;YACvCA,CAACA;YAEDA,IAAMA,IAAIA,GAAgBA,IAAIA,CAACA;YAE/BA,IAAOA,KAAKA,GAAqBA,QAAQA,CAACA,aAAaA,CAACA,KAAKA,CAACA,CAACA,CAACA,cAAcA;YAC9EA,EAAEA,CAACA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA;gBAChCA,MAAMA,CAACA;YACRA,CAACA;YACDA,IAAIA,CAACA,gBAAgBA,CAACA,EAAEA,CAACA,GAAGA,EAAEA,IAAIA,EAAEA,GAAGA,CAACA,SAASA,CAACA,KAAKA,EAAEA,CAACA;YAC1DA,OAAOA,CAACA,GAAGA,CAACA,UAAUA,GAAGA,EAAEA,GAAGA,MAAMA,GAAGA,QAAQA;gBAC9CA,iBAAiBA,GAAGA,GAAGA,CAACA,KAAKA,CAACA,aAAaA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA;gBAClEA,gBAAgBA,GAAGA,CAACA,IAAIA,CAACA,QAAQA,KAAKA,IAAIA,CAACA,CAACA,CAACA;YAC9CA,KAAKA,CAACA,gBAAgBA,CAACA,MAAMA,EAAEA;gBAC9BA,IAAMA,MAAMA,GAAsBA,GAAGA,CAACA,UAAUA,CAACA,MAAMA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,MAAMA,CAACA,CAACA;gBAC5EA,IAAIA,CAACA,UAAUA,CAACA,EAAEA,EAAEA,MAAMA,CAACA,CAACA;YAC7BA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,GAAGA,GAAGA,QAAQA,CAACA;QAEtBA,CAACA;QAEDH;;;;;;;WAOGA;QACHA,8BAAQA,GAARA,UAASA,EAAUA,EAAEA,QAAgBA,EACnCA,qBAAsCA;YAAtCI,qCAAsCA,GAAtCA,6BAAsCA;YAEvCA,EAAEA,CAACA,CAACA,IAAIA,CAACA,UAAUA,CAACA,CAACA,CAACA;gBACrBA,QAAQA,GAAGA,IAAIA,CAACA,UAAUA,GAAGA,QAAQA,CAACA;YACvCA,CAACA;YAEDA,IAAMA,IAAIA,GAAgBA,IAAIA,CAACA;YAE/BA,IAAMA,KAAKA,GAAqBA,QAAQA,CAACA,aAAaA,CAACA,KAAKA,CAACA,CAACA,CAACA,cAAcA;YAC7EA,EAAEA,CAACA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA;gBAChCA,MAAMA,CAACA;YACRA,CAACA;YACDA,IAAIA,CAACA,gBAAgBA,CAACA,EAAEA,CAACA,GAAGA,EAAEA,IAAIA,EAAEA,GAAGA,CAACA,SAASA,CAACA,KAAKA,EAAEA,CAACA;YAC1DA,OAAOA,CAACA,GAAGA,CAACA,UAAUA,GAAGA,EAAEA,GAAGA,MAAMA,GAAGA,QAAQA;gBAC9CA,iBAAiBA,GAAGA,GAAGA,CAACA,KAAKA,CAACA,aAAaA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA;gBAClEA,gBAAgBA,GAAGA,CAACA,IAAIA,CAACA,QAAQA,KAAKA,IAAIA,CAACA,CAACA,CAACA;YAC9CA,KAAKA,CAACA,gBAAgBA,CAACA,MAAMA,EAAEA;gBAC9BA,IAAMA,MAAMA,GAAsBA,GAAGA,CAACA,UAAUA,CAACA,MAAMA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,MAAMA,CAACA,CAACA;gBAC5EA,IAAMA,QAAQA,GAAcA,IAAIA,GAAGA,CAACA,KAAKA,CAACA,MAAMA,CAACA,CAACA;gBAClDA,EAAEA,CAACA,CAACA,qBAAqBA,CAACA,CAACA,CAACA;oBAC3BA,QAAQA,CAACA,oBAAoBA,CAACA,CAACA,EAAEA,CAACA,CAACA,CAACA;gBACrCA,CAACA;gBACDA,IAAIA,CAACA,UAAUA,CAACA,EAAEA,EAAEA,QAAQA,CAACA,CAACA;YAC/BA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,GAAGA,GAAGA,QAAQA,CAACA;QAEtBA,CAACA;QAEDJ;;;;;;;;WAQGA;QACHA,8BAAQA,GAARA,UAASA,EAAUA,EAAEA,QAAgBA,EAAEA,SAAqBA,EAC1DA,oBAAoCA;YADCK,yBAAqBA,GAArBA,aAAqBA;YAC1DA,oCAAoCA,GAApCA,2BAAoCA;YAErCA,EAAEA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,aAAaA,EAAEA,CAACA,CAACA,CAACA;gBAEhCA,EAAEA,CAACA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA;oBAChCA,MAAMA,CAACA;gBACRA,CAACA;gBACDA,IAAIA,CAACA,gBAAgBA,CAACA,EAAEA,CAACA,GAAGA,EAAEA,IAAIA,EAAEA,GAAGA,CAACA,SAASA,CAACA,KAAKA,EAAEA,CAACA;gBAE1DA,EAAEA,CAACA,CAACA,IAAIA,CAACA,UAAUA,CAACA,CAACA,CAACA;oBACrBA,QAAQA,GAAGA,IAAIA,CAACA,UAAUA,GAAGA,QAAQA,CAACA;gBACvCA,CAACA;gBAEDA,IAAMA,MAAIA,GAAgBA,IAAIA,CAACA;gBAC/BA,IAAMA,GAAGA,GAAmBA,IAAIA,cAAcA,EAAEA,CAACA;gBACjDA,GAAGA,CAACA,MAAMA,GAAGA;oBACZ,0BAA0B;oBAC1B,MAAI,CAAC,KAAK,CAAC,OAAO,CAAC,eAAe,CAAC,GAAG,CAAC,QAAQ,EAAE,UAAC,MAAmB;wBACpE,IAAM,KAAK,GAAc,IAAI,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,MAAM,EAAE,SAAS,IAAI,CAAC,CAAC,CAAC;wBACnE,EAAE,CAAC,CAAC,OAAO,oBAAoB,KAAK,WAAW,CAAC,CAAC,CAAC;4BACjD,KAAK,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,CAAC;wBACtD,CAAC;wBACD,MAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;wBAC3B,MAAI,CAAC,UAAU,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;oBAC7B,CAAC,CAAC,CAAC;gBACJ,CAAC,CAACA;gBAEFA,GAAGA,CAACA,IAAIA,CAACA,KAAKA,EAAEA,QAAQA,EAAEA,IAAIA,CAACA,CAACA;gBAChCA,GAAGA,CAACA,YAAYA,GAAGA,aAAaA,CAACA;gBACjCA,GAAGA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA;YAEhBA,CAACA;QAEFA,CAACA;QAEDL;;;;;;;;;;;;WAYGA;QACHA,oCAAcA,GAAdA,UAAeA,EAAUA,EAAEA,QAAgBA,EAAEA,KAAaA,EAAEA,KAAaA,EACvEA,QAAoBA,EAAEA,QAAoBA,EAC1CA,qBAAsCA;YADtCM,wBAAoBA,GAApBA,YAAoBA;YAAEA,wBAAoBA,GAApBA,YAAoBA;YAC1CA,qCAAsCA,GAAtCA,6BAAsCA;YAEvCA,IAAMA,IAAIA,GAAgBA,IAAIA,CAACA;YAC/BA,QAAQA,GAAGA,QAAQA,IAAIA,CAACA,CAACA;YACzBA,QAAQA,GAAGA,QAAQA,IAAIA,CAACA,CAACA;YACzBA,KAAKA,IAAIA,IAAIA,CAACA,MAAMA,CAACA;YACrBA,KAAKA,IAAIA,IAAIA,CAACA,MAAMA,CAACA;YACrBA,QAAQA,IAAIA,IAAIA,CAACA,MAAMA,CAACA;YACxBA,QAAQA,IAAIA,IAAIA,CAACA,MAAMA,CAACA;YAExBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,UAAUA,CAACA,CAACA,CAACA;gBACrBA,QAAQA,GAAGA,IAAIA,CAACA,UAAUA,GAAGA,QAAQA,CAACA;YACvCA,CAACA;YAEDA,IAAMA,KAAKA,GAAqBA,QAAQA,CAACA,aAAaA,CAACA,KAAKA,CAACA,CAACA,CAACA,cAAcA;YAC7EA,EAAEA,CAACA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA;gBAChCA,MAAMA,CAACA;YACRA,CAACA;YACDA,IAAIA,CAACA,gBAAgBA,CAACA,EAAEA,CAACA,GAAGA,EAAEA,IAAIA,EAAEA,GAAGA,CAACA,SAASA,CAACA,KAAKA,EAAEA,CAACA;YAC1DA,OAAOA,CAACA,GAAGA,CAACA,UAAUA,GAAGA,EAAEA,GAAGA,MAAMA,GAAGA,QAAQA;gBAC9CA,iBAAiBA,GAAGA,GAAGA,CAACA,KAAKA,CAACA,aAAaA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA;gBAClEA,gBAAgBA,GAAGA,CAACA,IAAIA,CAACA,QAAQA,KAAKA,IAAIA,CAACA,CAACA,CAACA;YAC9CA,KAAKA,CAACA,gBAAgBA,CAACA,MAAMA,EAAEA;gBAC9BA,IAAMA,MAAMA,GAAsBA,GAAGA,CAACA,UAAUA,CAACA,MAAMA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,MAAMA,CAACA,CAACA;gBAC5EA,IAAMA,QAAQA,GAAcA,IAAIA,GAAGA,CAACA,KAAKA,CAACA,MAAMA,CAACA,CAACA;gBAClDA,EAAEA,CAACA,CAACA,qBAAqBA,CAACA,CAACA,CAACA;oBAC3BA,QAAQA,CAACA,oBAAoBA,CAACA,CAACA,EAAEA,CAACA,CAACA,CAACA;gBACrCA,CAACA;gBACDA,IAAMA,EAAEA,GAAgBA,IAAIA,GAAGA,CAACA,WAAWA,CAACA,QAAQA,EAAEA,KAAKA,EAAEA,KAAKA,EAAEA,QAAQA,EAAEA,QAAQA,CAACA,CAACA;gBACxFA,IAAIA,CAACA,UAAUA,CAACA,EAAEA,EAAEA,EAAEA,CAACA,CAACA;YACzBA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,GAAGA,GAAGA,QAAQA,CAACA;QAEtBA,CAACA;QAEDN;;;;;WAKGA;QACHA,+BAASA,GAATA,UAAUA,GAAmBA;YAC5BO,EAAEA,CAACA,CAACA,GAAGA,CAACA,QAAQA,IAAIA,GAAGA,CAACA,QAAQA,CAACA,MAAMA,CAACA,CAACA,CAACA;gBACzCA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAWA,CAACA,EAAEA,CAACA,GAAGA,GAAGA,CAACA,QAAQA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;oBACtDA,IAAMA,OAAOA,GAAuBA,GAAGA,CAACA,QAAQA,CAACA,CAACA,CAACA,CAACA;oBACpDA,IAAMA,EAAEA,GAAWA,gBAAgBA,GAAGA,OAAOA,CAACA,IAAIA,CAACA;oBACnDA,IAAIA,CAACA,QAAQA,CAACA,EAAEA,EAAEA,OAAOA,CAACA,KAAKA,CAACA,CAACA;gBAClCA,CAACA;YACFA,CAACA;QACFA,CAACA;QAEDP;;;;;;;WAOGA;QACHA,wCAAkBA,GAAlBA,UAAmBA,OAA2BA;YAC7CQ,MAAMA,CAACA,IAAIA,CAACA,SAASA,CAACA,gBAAgBA,GAAGA,OAAOA,CAACA,IAAIA,CAACA,CAACA;QACxDA,CAACA;QAEDR;;;;WAIGA;QACHA,yBAAGA,GAAHA,UAAIA,GAAWA;YACdS,MAAMA,CAACA,IAAIA,CAACA,SAASA,CAACA,GAAGA,CAACA,CAACA;QAC5BA,CAACA;QAEDT,uCAAiBA,GAAjBA,UAAkBA,EAAUA;YAC3BU,EAAEA,CAACA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA;gBAC/BA,OAAOA,CAACA,GAAGA,CAACA,qBAAqBA,GAAGA,EAAEA,GAAGA,kDAAkDA,CAACA,CAACA;gBAC7FA,MAAMA,CAACA,IAAIA,CAACA;YACbA,CAACA;YACDA,IAAIA,CAACA,EAAEA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA;gBAC7BA,OAAOA,CAACA,GAAGA,CAACA,qBAAqBA,GAAGA,EAAEA,GAAGA,2BAA2BA,CAACA,CAACA;gBACtEA,MAAMA,CAACA,IAAIA,CAACA;YACbA,CAACA;QACFA,CAACA;QAEDV;;;;WAIGA;QACHA,yBAAGA,GAAHA,UAAIA,GAAWA,EAAEA,KAAUA;YAC1BW,IAAIA,CAACA,SAASA,CAACA,GAAGA,CAACA,GAAGA,KAAKA,CAACA;QAC7BA,CAACA;QAEDX,gCAAUA,GAAVA,UAAWA,GAAWA,EAAEA,QAAaA;YACpCY,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA;gBACjCA,OAAOA,CAACA,KAAKA,CAACA,wBAAwBA,GAAGA,GAAGA,CAACA,CAACA;gBAC9CA,MAAMA,CAACA;YACRA,CAACA;YACDA,EAAEA,CAACA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA,GAAGA,CAACA,CAACA,IAAIA,KAAKA,GAAGA,CAACA,SAASA,CAACA,IAAIA,CAACA,CAACA,CAACA;gBAC5DA,QAAQA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,CAACA;YACjCA,CAACA;YACDA,IAAIA,CAACA,SAASA,CAACA,GAAGA,CAACA,GAAGA,QAAQA,CAACA;YAC/BA,OAAOA,IAAIA,CAACA,gBAAgBA,CAACA,GAAGA,CAACA,CAACA;YAClCA,OAAOA,CAACA,GAAGA,CAACA,aAAaA,GAAGA,GAAGA,GAAGA,iBAAiBA;gBACjDA,GAAGA,CAACA,KAAKA,CAACA,aAAaA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA;gBAC9CA,gBAAgBA,GAAGA,CAACA,IAAIA,CAACA,QAAQA,KAAKA,IAAIA,CAACA,CAACA,CAACA;YAC/CA,EAAEA,CAACA,CAACA,IAAIA,CAACA,aAAaA,EAAEA,IAAIA,IAAIA,CAACA,QAAQA,CAACA,CAACA,CAACA;gBAC3CA,IAAIA,CAACA,QAAQA,CAACA,IAAIA,EAAEA,CAACA;gBACrBA,OAAOA,IAAIA,CAACA,QAAQA,CAACA;gBACrBA,OAAOA,CAACA,GAAGA,CAACA,+CAA+CA,GAAGA,CAACA,IAAIA,CAACA,QAAQA,KAAKA,IAAIA,CAACA,GAAGA,GAAGA,CAACA,CAACA;gBAC9FA,EAAEA,CAACA,CAACA,IAAIA,CAACA,YAAYA,CAACA,CAACA,CAACA;oBACvBA,IAAIA,CAACA,QAAQA,GAAGA,IAAIA,CAACA,YAAYA,CAACA;oBAClCA,OAAOA,IAAIA,CAACA,YAAYA,CAACA;gBAC1BA,CAACA;YACFA,CAACA;YACDA,IAAIA,CAACA,CAACA;gBACLA,OAAOA,CAACA,GAAGA,CAACA,6BAA6BA,GAAGA,IAAIA,CAACA,aAAaA,EAAEA,GAAGA,IAAIA,GAAGA,CAACA,IAAIA,CAACA,QAAQA,KAAKA,IAAIA,CAACA,CAACA,CAACA;YACrGA,CAACA;QACFA,CAACA;QAEDZ;;;;WAIGA;QACHA,mCAAaA,GAAbA;YACCa,MAAMA,CAACA,GAAGA,CAACA,KAAKA,CAACA,aAAaA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA,KAAKA,CAACA,CAACA;QAC7DA,CAACA;QAEDb,4BAAMA,GAANA,UAAOA,QAAkBA;YAExBc,EAAEA,CAACA,CAACA,IAAIA,CAACA,aAAaA,EAAEA,CAACA,CAACA,CAACA;gBAC1BA,QAAQA,EAAEA,CAACA;YACZA,CAACA;YACDA,IAAIA,CAACA,EAAEA,CAACA,CAACA,IAAIA,CAACA,QAAQA,CAACA,CAACA,CAACA;gBACxBA,IAAIA,CAACA,YAAYA,GAAGA,QAAQA,CAACA;YAC9BA,CAACA;YACDA,IAAIA,CAACA,CAACA;gBACLA,IAAIA,CAACA,QAAQA,GAAGA,QAAQA,CAACA;YAC1BA,CAACA;QACFA,CAACA;QAEFd,kBAACA;IAADA,CA9UAD,AA8UCC,IAAAD;IA9UYA,eAAWA,cA8UvBA,CAAAA;AACFA,CAACA,EAtWM,GAAG,KAAH,GAAG,QAsWT;ACtWD,IAAO,GAAG,CAST;AATD,WAAO,GAAG,EAAC,CAAC;IACXA,YAAYA,CAACA;IAEbA,WAAYA,SAASA;QACpBgB,+CAAWA,CAAAA;QACXA,2CAASA,CAAAA;QACTA,2CAASA,CAAAA;QACTA,yCAAQA,CAAAA;IACTA,CAACA,EALWhB,aAASA,KAATA,aAASA,QAKpBA;IALDA,IAAYA,SAASA,GAATA,aAKXA,CAAAA;AACFA,CAACA,EATM,GAAG,KAAH,GAAG,QAST;ACTD,IAAO,GAAG,CA2ZT;AA3ZD,WAAO,GAAG,EAAC,CAAC;IACXA,YAAYA,CAACA;IAabA;;OAEGA;IACHA;QAWCiB,sBAAYA,MAA2BA;YACtCC,IAAIA,CAACA,OAAOA,GAAGA,MAAMA,CAACA;YACtBA,IAAIA,CAACA,OAAOA,GAAGA,KAAKA,CAACA;QACtBA,CAACA;QAEOD,sCAAeA,GAAvBA;YAAAE,iBAyBCA;YAvBAA,IAAIA,CAACA,EAAEA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,EAAEA,CAACA;YAC1BA,IAAIA,CAACA,OAAOA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,OAAOA,CAACA;YAEpCA,IAAIA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,WAAWA,CAACA,OAAOA,CAACA,kBAAkBA,EAAEA,CAACA;YACpEA,IAAIA,CAACA,MAAMA,CAACA,IAAIA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,IAAIA,CAACA;YACrCA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA;YACzCA,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,SAASA,YAAYA,SAASA,CAACA,CAACA,CAACA;gBACjDA,IAAIA,CAACA,MAAMA,CAACA,OAAOA,CAAYA,IAAIA,CAACA,OAAOA,CAACA,SAASA,CAACA,CAACA;YACxDA,CAACA;YACDA,IAAIA,CAACA,CAACA;gBACLA,IAAIA,KAAKA,GAA6BA,IAAIA,CAACA,OAAOA,CAACA,SAASA,CAACA;gBAC7DA,KAAKA,CAACA,OAAOA,CAACA,UAACA,IAAeA;oBAC7BA,KAAIA,CAACA,MAAMA,CAACA,OAAOA,CAACA,IAAIA,CAACA,CAACA;gBAC3BA,CAACA,CAACA,CAACA;YACJA,CAACA;YAEDA,IAAIA,CAACA,YAAYA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,WAAWA,IAAIA,CAACA,CAACA;YAElDA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,IAAIA,CAACA,CAACA,CAACA;gBACxBA,IAAIA,MAAIA,GAAiBA,IAAIA,CAACA;gBAC9BA,IAAIA,WAAWA,GAAgBA,IAAIA,CAACA,OAAOA,CAACA,WAAWA,CAACA;gBACxDA,IAAIA,CAACA,MAAMA,CAACA,OAAOA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,gBAAgBA,CAACA,MAAIA,CAACA,EAAEA,CAACA,CAACA;YAC9DA,CAACA;QACFA,CAACA;QAEDF,4BAAKA,GAALA;YACCG,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA;gBACnBA,IAAIA,CAACA,MAAMA,CAACA,IAAIA,EAAEA,CAACA;gBACnBA,IAAIA,CAACA,WAAWA,IAAIA,IAAIA,CAACA,MAAMA,CAACA,OAAOA,CAACA,WAAWA,GAAGA,IAAIA,CAACA,MAAMA,CAACA;gBAClEA,IAAIA,CAACA,OAAOA,GAAGA,IAAIA,CAACA;gBACpBA,IAAIA,CAACA,MAAMA,GAAGA,CAACA,CAACA;YACjBA,CAACA;QACFA,CAACA;QAEDH,6BAAMA,GAANA;YACCI,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA;gBAClBA,IAAIA,CAACA,OAAOA,GAAGA,KAAKA,CAACA;gBACrBA,IAAIA,eAAeA,GAAWA,IAAIA,CAACA,YAAYA,CAACA;gBAChDA,IAAIA,CAACA,eAAeA,EAAEA,CAACA;gBACvBA,IAAIA,CAACA,YAAYA,GAAGA,eAAeA,GAAGA,IAAIA,CAACA,WAAWA,CAACA;gBACvDA,IAAIA,CAACA,YAAYA,GAAGA,IAAIA,CAACA,YAAYA,GAAGA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,CAACA,QAAQA,CAACA;gBACpEA,IAAIA,YAAYA,GAAWA,IAAIA,CAACA,MAAMA,CAACA,OAAOA,CAACA,WAAWA,CAACA;gBAC3DA,IAAIA,CAACA,MAAMA,CAACA,KAAKA,CAACA,YAAYA,EAAEA,IAAIA,CAACA,YAAYA,CAACA,CAACA;gBACnDA,IAAIA,CAACA,MAAMA,GAAGA,YAAYA,CAACA;gBAC3BA,IAAIA,CAACA,WAAWA,GAAGA,CAACA,CAACA;YACtBA,CAACA;QACFA,CAACA;QAEDJ,4BAAKA,GAALA;YACCK,IAAIA,CAACA,OAAOA,GAAGA,KAAKA,CAACA;YACrBA,IAAIA,CAACA,eAAeA,EAAEA,CAACA;YACvBA,IAAIA,YAAYA,GAAWA,IAAIA,CAACA,MAAMA,CAACA,OAAOA,CAACA,WAAWA,CAACA;YAC3DA,IAAIA,CAACA,MAAMA,CAACA,KAAKA,CAACA,YAAYA,EAAEA,IAAIA,CAACA,YAAYA,CAACA,CAACA;YACnDA,IAAIA,CAACA,MAAMA,GAAGA,YAAYA,CAACA;YAC3BA,IAAIA,CAACA,WAAWA,GAAGA,CAACA,CAACA;QACtBA,CAACA;QAEFL,mBAACA;IAADA,CA3EAjB,AA2ECiB,IAAAjB;IAEDA;QA4BCuB;;;;WAIGA;QACHA;YACCC,IAAIA,CAACA,aAAaA,GAAGA,IAAIA,CAACA;YAC1BA,IAAIA,CAACA,OAAOA,GAAGA,EAAEA,CAACA;YAClBA,IAAIA,CAACA,UAAUA,GAAGA,GAAGA,CAACA,CAACA,UAAUA;YACjCA,IAAIA,CAACA,UAAUA,GAAGA,IAAIA,CAACA;YACvBA,IAAIA,CAACA,MAAMA,GAAGA,KAAKA,CAACA;YACpBA,IAAIA,CAACA,cAAcA,GAAGA,EAAEA,CAACA;YACzBA,IAAIA,CAACA,uBAAuBA,GAAGA,CAACA,CAACA;QAClCA,CAACA;QAEOD,yCAAmBA,GAA3BA,UAA4BA,EAAUA,EAAEA,IAAqBA,EAC3DA,WAAuBA,EAAEA,YAA6BA;YADhBE,oBAAqBA,GAArBA,YAAqBA;YAC3DA,2BAAuBA,GAAvBA,eAAuBA;YAAEA,4BAA6BA,GAA7BA,mBAA6BA;YAEvDA,IAAIA,IAAIA,GAAgBA,IAAIA,CAACA;YAE7BA,IAAIA,aAAaA,GAAWA,IAAIA,CAACA,oBAAoBA,EAAEA,CAACA;YAExDA,IAAIA,WAAWA,GAAiBA,IAAIA,YAAYA,CAACA;gBAChDA,WAAWA,EAAEA,IAAIA;gBACjBA,MAAMA,EAAEA,IAAIA,CAACA,OAAOA,CAACA,EAAEA,CAACA,CAACA,SAASA,EAAEA;gBACpCA,SAASA,EAAEA,IAAIA,CAACA,gBAAgBA;gBAChCA,EAAEA,EAAEA,aAAaA;gBACjBA,IAAIA,EAAEA,IAAIA;gBACVA,gBAAgBA,EAAEA,UAASA,cAAsBA;oBAChD,MAAM,CAAC;wBACN,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAAC,CAAC;wBACzC,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;4BAClB,YAAY,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;wBACjC,CAAC;oBACF,CAAC,CAAC;gBACH,CAAC;gBACDA,OAAOA,EAAEA,EAAEA;gBACXA,WAAWA,EAAEA,WAAWA;aACxBA,CAACA,CAACA;YACHA,MAAMA,CAACA,WAAWA,CAACA;QACpBA,CAACA;QAEOF,0CAAoBA,GAA5BA;YACCG,MAAMA,CAACA,IAAIA,CAACA,uBAAuBA,EAAEA,CAACA;QACvCA,CAACA;QAEDH;;WAEGA;QACHA,0BAAIA,GAAJA;YACCI,IAAIA,CAACA;gBACJA,MAAMA,CAACA,YAAYA,GAAGA,MAAMA,CAACA,YAAYA,IAAIA,MAAMA,CAACA,kBAAkBA,CAACA;gBACvEA,IAAIA,CAACA,OAAOA,GAAGA,IAAIA,MAAMA,CAACA,YAAYA,EAAEA,CAACA;gBACzCA,IAAIA,CAACA,gBAAgBA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,UAAUA,EAAEA,CAACA;gBAClDA,IAAIA,CAACA,gBAAgBA,CAACA,IAAIA,CAACA,cAAcA,CAACA,CAACA,EAAEA,IAAIA,CAACA,OAAOA,CAACA,WAAWA,CAACA,CAACA;gBACvEA,IAAIA,CAACA,gBAAgBA,CAACA,IAAIA,CAACA,KAAKA,GAAGA,CAACA,CAACA;gBACrCA,IAAIA,CAACA,gBAAgBA,CAACA,OAAOA,CAACA,IAAIA,CAACA,OAAOA,CAACA,WAAWA,CAACA,CAACA;gBACxDA,IAAIA,CAACA,YAAYA,GAAGA,IAAIA,CAACA;YAC1BA,CAAEA;YAAAA,KAAKA,CAACA,CAACA,CAACA,CAACA,CAACA,CAACA;gBACZA,OAAOA,CAACA,KAAKA,CAACA,qDAAqDA,CAACA,CAACA;gBACrEA,IAAIA,CAACA,YAAYA,GAAGA,KAAKA,CAACA;YAC3BA,CAACA;QACFA,CAACA;QAEDJ;;;WAGGA;QACHA,8BAAQA,GAARA,UAASA,KAAgBA;YACxBK,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA;gBAClBA,IAAIA,CAACA,OAAOA,CAACA,KAAKA,CAACA,KAAKA,EAAEA,CAACA,GAAGA,KAAKA,CAACA;YACrCA,CAACA;QACFA,CAACA;QAEDL,kCAAYA,GAAZA,UAAaA,UAAkBA;YAE9BM,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA;gBAClBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,aAAaA,CAACA,CAACA,CAACA;oBACxBA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA,CAACA;wBAClBA,qFAAqFA;wBACrFA,IAAIA,CAACA,eAAeA,CAACA,IAAIA,CAACA,cAAcA,CAACA,IAAIA,CAACA,eAAeA,CAACA,IAAIA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,OAAOA,CAACA,WAAWA,CAACA,CAACA;wBACpGA,IAAIA,CAACA,eAAeA,CAACA,IAAIA,CAACA,uBAAuBA,CAACA,CAACA,EAAEA,IAAIA,CAACA,OAAOA,CAACA,WAAWA,GAAGA,IAAIA,CAACA,UAAUA,CAACA,CAACA;oBAClGA,CAACA;oBACDA,IAAIA,IAAIA,GAAgBA,IAAIA,CAACA;oBAC7BA,UAAUA,CAACA;wBACVA,IAAIA,CAACA,SAASA,CAACA,UAAUA,CAACA,CAACA;oBAC5BA,CAACA,EAAEA,IAAIA,CAACA,UAAUA,GAAGA,IAAIA,CAACA,CAACA;gBAC5BA,CAACA;gBACDA,IAAIA,CAACA,CAACA;oBACLA,IAAIA,CAACA,SAASA,CAACA,UAAUA,CAACA,CAACA;gBAC5BA,CAACA;YACFA,CAACA;QACFA,CAACA;QAEDN;;;;;;WAMGA;QACHA,qCAAeA,GAAfA;YACCO,MAAMA,CAACA,IAAIA,CAACA,cAAcA,CAACA;QAC5BA,CAACA;QAEDP;;;;WAIGA;QACHA,mCAAaA,GAAbA;YACCQ,MAAMA,CAACA,IAAIA,CAACA,YAAYA,CAACA;QAC1BA,CAACA;QAEDR;;;WAGGA;QACHA,8BAAQA,GAARA;YACCS,IAAIA,CAACA,cAAcA,CAACA,OAAOA,CAACA,UAACA,KAAmBA;gBAC/CA,KAAKA,CAACA,KAAKA,EAAEA,CAACA;YACfA,CAACA,CAACA,CAACA;QACJA,CAACA;QAEDT;;;;;;;;;WASGA;QACHA,+BAASA,GAATA,UAAUA,EAAUA,EAAEA,IAAcA;YAEnCU,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA;gBAElBA,mEAAmEA;gBACnEA,iEAAiEA;gBACjEA,8CAA8CA;gBAC9CA,EAAEA,CAACA,CAACA,IAAIA,CAACA,aAAaA,CAACA,CAACA,CAACA;oBACxBA,IAAIA,CAACA,SAASA,CAACA,KAAKA,CAACA,CAACA;gBACvBA,CAACA;gBAEDA,EAAEA,CAACA,CAACA,CAACA,EAAEA,CAACA,CAACA,CAACA;oBACTA,MAAMA,CAACA,CAACA,kCAAkCA;gBAC3CA,CAACA;gBACDA,IAAIA,KAAKA,GAAUA,IAAIA,CAACA,OAAOA,CAACA,EAAEA,CAACA,CAACA;gBACpCA,EAAEA,CAACA,CAACA,OAAOA,IAAIA,KAAKA,WAAWA,CAACA,CAACA,CAACA;oBACjCA,IAAIA,GAAGA,KAAKA,CAACA,wBAAwBA,EAAEA,CAACA;gBACzCA,CAACA;gBAEDA,IAAIA,CAACA,eAAeA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,UAAUA,EAAEA,CAACA;gBACjDA,IAAIA,CAACA,eAAeA,CAACA,IAAIA,CAACA,cAAcA,CAACA,CAACA,EAAEA,IAAIA,CAACA,OAAOA,CAACA,WAAWA,CAACA,CAACA;gBACtEA,IAAIA,CAACA,eAAeA,CAACA,IAAIA,CAACA,KAAKA,GAAGA,CAACA,CAACA;gBACpCA,IAAIA,CAACA,aAAaA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,kBAAkBA,EAAEA,CAACA;gBACvDA,IAAIA,CAACA,aAAaA,CAACA,IAAIA,GAAGA,IAAIA,CAACA;gBAC/BA,IAAIA,CAACA,eAAeA,GAAGA,KAAKA,CAACA,YAAYA,EAAEA,IAAIA,CAACA,CAACA;gBACjDA,IAAIA,CAACA,aAAaA,CAACA,SAASA,GAAGA,IAAIA,CAACA,eAAeA,CAACA;gBACpDA,IAAIA,CAACA,aAAaA,CAACA,MAAMA,GAAGA,KAAKA,CAACA,SAASA,EAAEA,CAACA;gBAC9CA,IAAIA,CAACA,aAAaA,CAACA,OAAOA,GAAGA,IAAIA,CAACA,aAAaA,CAACA,MAAMA,CAACA,QAAQA,CAACA;gBAChEA,IAAIA,CAACA,aAAaA,CAACA,OAAOA,CAACA,IAAIA,CAACA,eAAeA,CAACA,CAACA;gBACjDA,IAAIA,CAACA,eAAeA,CAACA,OAAOA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA,CAACA;gBACpDA,IAAIA,CAACA,aAAaA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA;gBAC5BA,IAAIA,CAACA,cAAcA,GAAGA,EAAEA,CAACA;gBACzBA,OAAOA,CAACA,GAAGA,CAACA,kCAAkCA,GAAGA,EAAEA,GAAGA,UAAUA,GAAGA,IAAIA,CAACA,CAACA;YAE1EA,CAACA;QAEFA,CAACA;QAEDV;;;;;;;;;;;;WAYGA;QACHA,+BAASA,GAATA,UAAUA,EAAUA,EAAEA,IAAqBA,EAAEA,YAA6BA;YAApDW,oBAAqBA,GAArBA,YAAqBA;YAAEA,4BAA6BA,GAA7BA,mBAA6BA;YACzEA,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA;gBAElBA,IAAIA,YAAYA,GAAiBA,IAAIA,CAACA,mBAAmBA,CAACA,EAAEA,EAAEA,IAAIA,EAAEA,CAACA,EACnEA,YAAYA,CAACA,CAACA;gBAChBA,IAAIA,CAACA,cAAcA,CAACA,IAAIA,CAACA,YAAYA,CAACA,CAACA;gBACvCA,YAAYA,CAACA,KAAKA,EAAEA,CAACA;gBACrBA,MAAMA,CAACA,YAAYA,CAACA,EAAEA,CAACA;YACxBA,CAACA;YAEDA,MAAMA,CAACA,CAACA,CAACA,CAACA;QACXA,CAACA;QAEDX;;;;WAIGA;QACKA,yCAAmBA,GAA3BA,UAA4BA,EAAUA;YACrCY,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAWA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,cAAcA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;gBAC7DA,EAAEA,CAACA,CAACA,IAAIA,CAACA,cAAcA,CAACA,CAACA,CAACA,CAACA,EAAEA,KAAKA,EAAEA,CAACA,CAACA,CAACA;oBACtCA,IAAIA,KAAKA,GAAiBA,IAAIA,CAACA,cAAcA,CAACA,CAACA,CAACA,CAACA;oBACjDA,IAAIA,CAACA,cAAcA,CAACA,MAAMA,CAACA,CAACA,EAAEA,CAACA,CAACA,CAACA;oBACjCA,MAAMA,CAACA,KAAKA,CAACA;gBACdA,CAACA;YACFA,CAACA;YACDA,MAAMA,CAACA,IAAIA,CAACA;QACbA,CAACA;QAEDZ;;;WAGGA;QACHA,+BAASA,GAATA;YAECa,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAWA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,cAAcA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;gBAC7DA,IAAIA,KAAKA,GAAiBA,IAAIA,CAACA,cAAcA,CAACA,CAACA,CAACA,CAACA;gBACjDA,EAAEA,CAACA,CAACA,KAAKA,CAACA,OAAOA,CAACA,CAACA,CAACA;oBACnBA,KAAKA,CAACA,MAAMA,EAAEA,CAACA;gBAChBA,CAACA;YACFA,CAACA;QACFA,CAACA;QAEDb;;;;;;WAMGA;QACHA,+BAASA,GAATA,UAAUA,KAAsBA;YAAtBc,qBAAsBA,GAAtBA,aAAsBA;YAC/BA,IAAIA,CAACA,aAAaA,CAACA,IAAIA,EAAEA,CAACA;YAC1BA,EAAEA,CAACA,CAACA,CAACA,KAAKA,CAACA,CAACA,CAACA;gBACZA,IAAIA,CAACA,aAAaA,CAACA,UAAUA,EAAEA,CAACA;gBAChCA,IAAIA,CAACA,eAAeA,CAACA,UAAUA,EAAEA,CAACA;gBAClCA,OAAOA,IAAIA,CAACA,aAAaA,CAACA;gBAC1BA,OAAOA,IAAIA,CAACA,eAAeA,CAACA;YAC7BA,CAACA;QACFA,CAACA;QAEDd;;;;;;;WAOGA;QACHA,+BAASA,GAATA,UAAUA,EAAUA;YACnBe,IAAIA,KAAKA,GAAiBA,IAAIA,CAACA,mBAAmBA,CAACA,EAAEA,CAACA,CAACA;YACvDA,EAAEA,CAACA,CAACA,KAAKA,CAACA,CAACA,CAACA;gBACXA,KAAKA,CAACA,MAAMA,CAACA,IAAIA,EAAEA,CAACA;gBACpBA,MAAMA,CAACA,IAAIA,CAACA;YACbA,CAACA;YACDA,MAAMA,CAACA,KAAKA,CAACA;QACdA,CAACA;QAEDf,iCAAWA,GAAXA;YACCgB,IAAIA,CAACA,MAAMA,GAAGA,CAACA,IAAIA,CAACA,MAAMA,CAACA;YAC3BA,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA;gBAClBA,IAAIA,YAAYA,GAAWA,IAAIA,CAACA,MAAMA,GAAGA,CAACA,GAAGA,CAACA,CAACA;gBAC/CA,IAAIA,CAACA,gBAAgBA,CAACA,IAAIA,CAACA,cAAcA,CAACA,YAAYA,EAAEA,IAAIA,CAACA,OAAOA,CAACA,WAAWA,CAACA,CAACA;gBAClFA,IAAIA,CAACA,gBAAgBA,CAACA,IAAIA,CAACA,KAAKA,GAAGA,YAAYA,CAACA;YACjDA,CAACA;YACDA,MAAMA,CAACA,IAAIA,CAACA,MAAMA,CAACA;QACpBA,CAACA;QAEDhB,sBAAIA,kCAASA;iBAAbA;gBACCiB,YAAYA,CAACA;gBACbA,MAAMA,CAACA,IAAIA,CAACA,UAAUA,CAACA;YACxBA,CAACA;iBAEDjB,UAAcA,IAAaA;gBAC1BiB,IAAIA,CAACA,UAAUA,GAAGA,IAAIA,CAACA;YACxBA,CAACA;;;WAJAjB;QAMDA,sBAAIA,yCAAgBA;iBAApBA;gBACCkB,MAAMA,CAACA,IAAIA,CAACA,UAAUA,CAACA;YACxBA,CAACA;iBAEDlB,UAAqBA,OAAeA;gBACnCkB,IAAIA,CAACA,UAAUA,GAAGA,OAAOA,CAACA;YAC3BA,CAACA;;;WAJAlB;QAKFA,kBAACA;IAADA,CA5TAvB,AA4TCuB,IAAAvB;IA5TYA,eAAWA,cA4TvBA,CAAAA;AACFA,CAACA,EA3ZM,GAAG,KAAH,GAAG,QA2ZT;;;;;;AC3ZD,IAAO,GAAG,CA0BT;AA1BD,WAAO,GAAG,EAAC,CAAC;IACXA,YAAYA,CAACA;IAEbA;QAAgC0C,8BAAWA;QAE1CA,oBAAYA,QAAeA,EAAEA,KAAaA,EAAEA,KAAaA,EAAEA,OAAeA,EAAEA,QAAgBA;YAC3FC,kBAAMA,QAAQA,EAAEA,KAAKA,EAAEA,KAAKA,EAAEA,OAAOA,EAAEA,QAAQA,CAACA,CAACA;QAClDA,CAACA;QAEDD,+BAAUA,GAAVA,UAAWA,GAAWA,EAAEA,CAASA,EAAEA,CAASA;YAE3CE,IAAIA,UAAUA,GAAWA,IAAIA,CAACA,IAAIA,CAACA;YACnCA,IAAIA,GAAGA,GAA6BA,MAAMA,CAACA,IAAIA,CAACA,MAAMA,CAACA,UAAUA,CAACA,IAAIA,CAACA,CAACA;YACxEA,IAAIA,SAASA,GAAWA,IAAIA,CAACA,KAAKA,CAACA;YAEnCA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAWA,CAACA,EAAEA,CAACA,GAAGA,GAAGA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;gBAC7CA,IAAIA,EAAEA,GAAWA,GAAGA,CAACA,UAAUA,CAACA,CAACA,CAACA,GAAGA,IAAIA,CAACA;gBAC1CA,EAAEA,CAACA,CAACA,EAAEA,GAAGA,CAACA,IAAIA,EAAEA,IAAIA,UAAUA,CAACA,CAACA,CAACA;oBAChCA,EAAEA,GAAGA,CAACA,CAACA;gBACRA,CAACA;gBACDA,IAAIA,CAACA,WAAWA,CAACA,GAAGA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,EAAEA,CAACA,CAACA;gBAChCA,CAACA,IAAIA,SAASA,CAACA;YAChBA,CAACA;QAEFA,CAACA;QACFF,iBAACA;IAADA,CAtBA1C,AAsBC0C,EAtB+B1C,eAAWA,EAsB1CA;IAtBYA,cAAUA,aAsBtBA,CAAAA;AACFA,CAACA,EA1BM,GAAG,KAAH,GAAG,QA0BT;AC1BD,IAAO,GAAG,CAmBT;AAnBD,WAAO,GAAG,EAAC,CAAC;IACXA,YAAYA,CAACA;IAEbA;;;;;;OAMGA;IACHA;QAAA6C;QAQAC,CAACA;QANAD;;WAEGA;QACIA,mCAAuBA,GAA9BA;YACCE,MAAMA,CAACA,MAAMA,CAACA,QAAQA,CAACA,MAAMA,CAACA;QAC/BA,CAACA;QACFF,kBAACA;IAADA,CARA7C,AAQC6C,IAAA7C;IARYA,eAAWA,cAQvBA,CAAAA;AACFA,CAACA,EAnBM,GAAG,KAAH,GAAG,QAmBT;ACnBD,IAAO,GAAG,CAgMT;AAhMD,WAAO,GAAG,EAAC,CAAC;IACXA,YAAYA,CAACA;IAcbA;;;;;;;;;;;;;;;;;;;;;;;OAuBGA;IACHA;QAaCgD,eAAYA,IAAeA;YAC1BC,EAAEA,CAACA,CAACA,CAACA,IAAIA,IAAIA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA,CAACA;gBAC3BA,MAAMA,iDAAiDA,CAACA;YACzDA,CAACA;YACDA,IAAIA,CAACA,QAAQA,GAAGA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,MAAMA,GAAGA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA;YACjEA,IAAIA,CAACA,aAAaA,GAAGA,CAACA,CAACA;YACvBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,QAAQA,IAAIA,IAAIA,CAACA,QAAQA,CAACA,CAACA,CAACA;gBACpCA,IAAIA,CAACA,cAAcA,CAACA,IAAIA,CAACA,QAAQA,EAAEA,IAAIA,CAACA,QAAQA,CAACA,CAACA;YACnDA,CAACA;YACDA,IAAIA,CAACA,SAASA,GAAGA,IAAIA,CAACA,QAAQA,CAACA;YAC/BA,IAAIA,CAACA,KAAKA,GAAGA,CAACA,CAACA,IAAIA,CAACA,IAAIA,CAACA;YACzBA,IAAIA,CAACA,UAAUA,GAAGA,CAACA,CAACA;YACpBA,IAAIA,CAACA,aAAaA,GAAGA,IAAIA,CAACA,KAAKA,GAAGA,CAACA,IAAIA,CAACA,SAASA,IAAIA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,CAACA;YAC9DA,IAAIA,CAACA,KAAKA,EAAEA,CAACA;QACdA,CAACA;QAEDD;;;;;;WAMGA;QACHA,sBAAMA,GAANA,UAAOA,KAAaA;YACnBE,EAAEA,CAACA,CAACA,IAAIA,CAACA,UAAUA,GAAGA,CAACA,CAACA,CAACA,CAACA;gBACzBA,IAAIA,CAACA,UAAUA,IAAIA,KAAKA,CAACA;gBACzBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,UAAUA,IAAIA,CAACA,IAAIA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA;oBAC5CA,IAAIA,CAACA,SAASA,CAACA,IAAIA,CAACA,CAACA;gBACtBA,CAACA;YACFA,CAACA;YACDA,EAAEA,CAACA,CAACA,IAAIA,CAACA,UAAUA,IAAIA,CAACA,CAACA,CAACA,CAACA;gBAC1BA,EAAEA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA;oBAChBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,aAAaA,KAAKA,CAACA,CAACA,IAAIA,IAAIA,CAACA,UAAUA,GAAGA,IAAIA,CAACA,aAAaA,GAAGA,CAACA,CAACA,CAACA,CAACA;wBAC3EA,IAAIA,CAACA,UAAUA,EAAEA,CAACA;wBAClBA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,CAACA;oBAClBA,CAACA;oBACDA,IAAIA,CAACA,CAACA;wBACLA,IAAIA,CAACA,UAAUA,GAAGA,IAAIA,CAACA,aAAaA,CAACA;wBACrCA,IAAIA,CAACA,UAAUA,GAAGA,CAACA,CAACA,CAACA;oBACtBA,CAACA;gBACFA,CAACA;gBACDA,IAAIA,CAACA,CAACA;oBACLA,IAAIA,CAACA,UAAUA,GAAGA,IAAIA,CAACA,GAAGA,CAACA,CAACA,EAAEA,IAAIA,CAACA,UAAUA,CAACA,CAACA;gBAChDA,CAACA;YACFA,CAACA;YACDA,MAAMA,CAACA,IAAIA,CAACA,MAAMA,EAAEA,CAACA;QACtBA,CAACA;QAEDF;;;;WAIGA;QACHA,4BAAYA,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ACA;gBACbA,mDAAmDA;gBACnDA,qCAAqCA;gBACrCA,0BAA0BA;gBAC1BA,wDAAwDA;gBACxDA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,IAAIA,EAAEA,GAAGA,CAACA,CAACA,CAACA,CAACA;oBAACA,MAAMA,CAACA,KAAKA,CAACA;gBAACA,CAACA;YACzCA,CAACA;YAACA,IAAIA,CAACA,CAACA;gBACNA,8DAA8DA;gBAC9DA,yBAAyBA;gBACzBA,mDAAmDA;gBACnDA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,IAAIA,EAAEA,GAAGA,CAACA,CAACA,CAACA,CAACA;oBAACA,MAAMA,CAACA,KAAKA,CAACA;gBAACA,CAACA;YACzCA,CAACA;YACDA,CAACA,IAAIA,CAACA,CAACA;YACPA,EAAEA,IAAIA,EAAEA,CAACA;YACTA,EAAEA,CAACA,CAACA,EAAEA,IAAIA,EAAEA,CAACA,CAACA,CAACA;gBACbA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,IAAIA,EAAEA,GAAGA,CAACA,CAACA,CAACA,CAACA;oBAACA,MAAMA,CAACA,KAAKA,CAACA;gBAACA,CAACA;YACzCA,CAACA;YAACA,IAAIA,CAACA,CAACA;gBACNA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,IAAIA,EAAEA,GAAGA,CAACA,CAACA,CAACA,CAACA;oBAACA,MAAMA,CAACA,KAAKA,CAACA;gBAACA,CAACA;YACzCA,CAACA;YACDA,MAAMA,CAACA,IAAIA,CAACA;QACbA,CAACA;QAEDF;;;;;;WAMGA;QACHA,8BAAUA,GAAVA,UAAWA,KAAoBA;YAE9BG,IAAIA,EAAEA,GAAWA,IAAIA,CAACA,CAACA,CAACA;YACxBA,IAAIA,EAAEA,GAAWA,IAAIA,CAACA,CAACA,CAACA;YACxBA,IAAIA,EAAEA,GAAWA,KAAKA,CAACA,CAACA,CAACA;YACzBA,IAAIA,EAAEA,GAAWA,KAAKA,CAACA,CAACA,CAACA;YACzBA,EAAEA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,EAAEA,IAAIA,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AAMA,CAACA,IAAIA,CAACA,QAAQA,CAACA,CAACA,CAACA,CAACA,QAAQA,CAACA,KAAKA,CAACA,CAACA;YACzCA,CAACA;QACFA,CAACA;QAEDT;;;;;WAKGA;QACHA,gCAAaA,GAAbA;YACCU,MAAMA,CAACA,IAAIA,CAACA,QAAQA,GAAGA,IAAIA,CAACA,SAASA,CAACA;QACvCA,CAACA;QAEDV;;;;;WAKGA;QACHA,iCAAcA,GAAdA;YACCW,MAAMA,CAACA,IAAIA,CAACA,QAAQA,GAAGA,IAAIA,CAACA,UAAUA,CAACA;QACxCA,CAACA;QAEDX;;;;;WAKGA;QACHA,8BAAWA,GAAXA,UAAYA,SAAiBA;YAC5BY,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAWA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;gBACrDA,EAAEA,CAACA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA,CAACA,CAACA,IAAIA,KAAKA,SAASA,CAACA,CAACA,CAACA;oBACvCA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,CAACA,CAACA,EAAEA,CAACA,CAACA,CAACA;oBACzBA,OAAOA,IAAIA,CAACA,YAAYA,CAACA,SAASA,CAACA,CAACA;oBACpCA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAWA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,YAAYA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;wBAC3DA,EAAEA,CAACA,CAACA,IAAIA,CAACA,YAAYA,CAACA,CAACA,CAACA,CAACA,IAAIA,KAAKA,SAASA,CAACA,CAACA,CAACA;4BAC7CA,OAAOA,IAAIA,CAACA,YAAYA,CAACA,CAACA,CAACA,CAACA;wBAC7BA,CAACA;oBACFA,CAACA;gBACFA,CAACA;gBACDA,MAAMA,CAACA,IAAIA,CAACA;YACbA,CAACA;YACDA,MAAMA,CAACA,KAAKA,CAACA;QACdA,CAACA;QACFZ,eAACA;IAADA,CAhTAV,AAgTC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","file":"gtp-all.js","sourcesContent":["module gtp {\r\n\t'use strict';\r\n\r\n\tinterface ResourceType {\r\n\t\ttype: gtp.AssetType;\r\n\t}\r\n\r\n\t/**\r\n\t * Loads resources for a game.  All games have to load resources such as\r\n\t * images, sound effects, JSON data, sprite sheets, etc.  This class provides\r\n\t * a wrapper around the loading of such resources, as well as a callback\r\n\t * mechanism to know when loading completes.  Games can use this class in a\r\n\t * \"loading\" state, for example.<p>\r\n\t *\r\n\t * Currently supported resources include:\r\n\t * <ul>\r\n\t *   <li>Images\r\n\t *   <li>Sound effects\r\n\t *   <li>JSON data\r\n\t *   <li>Sprite sheets\r\n\t *   <li>TMX maps\r\n\t * </ul>\r\n\t */\r\n\texport class AssetLoader {\r\n\r\n\t\tprivate _scale: number;\r\n\t\tprivate loadingAssetData: { [id: string]: ResourceType };\r\n\t\tprivate responses: { [id: string]: any };\r\n\t\tprivate callback: any;\r\n\t\taudio: gtp.AudioSystem;\r\n\t\tprivate _assetRoot: string;\r\n\t\tprivate nextCallback: Function;\r\n\r\n\t\t/**\r\n\t\t * Provides methods to load images, sounds, and Tiled maps.\r\n\t\t *\r\n\t\t * @param {number} scale How much to scale image resources.\r\n\t\t * @param {gtp.AudioSystem} audio A web audio context.\r\n\t\t * @param {string} [assetRoot] If specified, this is the implicit root\r\n\t\t *        directory for all assets to load.  Use this if all assets are\r\n\t\t *        in a subfolder or different hierarchy than the project itself.\r\n\t\t * @constructor\r\n\t\t */\r\n\t\tconstructor(scale: number = 1, audio: gtp.AudioSystem, assetRoot?: string) {\r\n\t\t\tthis._scale = scale || 1;\r\n\t\t\tthis.loadingAssetData = {};\r\n\t\t\tthis.responses = {};\r\n\t\t\tthis.callback = null;\r\n\t\t\tthis.audio = audio;\r\n\t\t\tthis._assetRoot = assetRoot;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Starts loading a JSON resource.\r\n\t\t * @param {string} id The ID to use when retrieving this resource.\r\n\t\t * @param {string} [url=id] The URL of the resource, defaulting to\r\n\t\t *        {@code id} if not specified.\r\n\t\t */\r\n\t\taddJson(id: string, url: string = id) {\r\n\r\n\t\t\tif (this._assetRoot) {\r\n\t\t\t\turl = this._assetRoot + url;\r\n\t\t\t}\r\n\r\n\t\t\tif (this._isAlreadyTracked(id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.loadingAssetData[id] = { type: gtp.AssetType.JSON };\r\n\t\t\tconsole.log('Adding: ' + id + ' => ' + url +\r\n\t\t\t\t', remaining == ' + gtp.Utils.getObjectSize(this.loadingAssetData) +\r\n\t\t\t\t', callback == ' + (this.callback !== null));\r\n\r\n\t\t\tconst that: AssetLoader = this;\r\n\t\t\tconst xhr: XMLHttpRequest = new XMLHttpRequest();\r\n\t\t\txhr.onreadystatechange = function() {\r\n\t\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\t\tconst response: string = xhr.responseText;\r\n\t\t\t\t\tthat._completed(id, response);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.open('GET', url, true);\r\n\t\t\txhr.send(null);\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Starts loading a canvas resource.\r\n\t\t * @param {string} id The ID to use when retrieving this resource.\r\n\t\t * @param {string} imageSrc The URL of the resource.\r\n\t\t */\r\n\t\taddCanvas(id: string, imageSrc: string) {\r\n\r\n\r\n\t\t\tif (this._assetRoot) {\r\n\t\t\t\timageSrc = this._assetRoot + imageSrc;\r\n\t\t\t}\r\n\r\n\t\t\tconst self: AssetLoader = this;\r\n\r\n\t\t\tconst  image: HTMLImageElement = document.createElement('img'); //new Image();\r\n\t\t\tif (this._isAlreadyTracked(id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.loadingAssetData[id] = { type: gtp.AssetType.IMAGE };\r\n\t\t\tconsole.log('Adding: ' + id + ' => ' + imageSrc +\r\n\t\t\t\t', remaining == ' + gtp.Utils.getObjectSize(this.loadingAssetData) +\r\n\t\t\t\t', callback == ' + (this.callback !== null));\r\n\t\t\timage.addEventListener('load', () => {\r\n\t\t\t\tconst canvas: HTMLCanvasElement = gtp.ImageUtils.resize(image, self._scale);\r\n\t\t\t\tself._completed(id, canvas);\r\n\t\t\t});\r\n\r\n\t\t\timage.src = imageSrc;\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Starts loading an image resource.\r\n\t\t * @param {string} id The ID to use when retrieving this resource.\r\n\t\t * @param {string} imageSrc The URL of the resource.\r\n\t\t * @param {boolean} firstPixelTranslucent If truthy, the pixel at (0, 0)\r\n\t\t *        is made translucent, along with all other pixels of the same\r\n\t\t *        color.  The default value is <code>false</code>.\r\n\t\t */\r\n\t\taddImage(id: string, imageSrc: string,\r\n\t\t\t\tfirstPixelTranslucent: boolean = false) {\r\n\r\n\t\t\tif (this._assetRoot) {\r\n\t\t\t\timageSrc = this._assetRoot + imageSrc;\r\n\t\t\t}\r\n\r\n\t\t\tconst self: AssetLoader = this;\r\n\r\n\t\t\tconst image: HTMLImageElement = document.createElement('img'); //new Image();\r\n\t\t\tif (this._isAlreadyTracked(id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.loadingAssetData[id] = { type: gtp.AssetType.IMAGE };\r\n\t\t\tconsole.log('Adding: ' + id + ' => ' + imageSrc +\r\n\t\t\t\t', remaining == ' + gtp.Utils.getObjectSize(this.loadingAssetData) +\r\n\t\t\t\t', callback == ' + (this.callback !== null));\r\n\t\t\timage.addEventListener('load', () => {\r\n\t\t\t\tconst canvas: HTMLCanvasElement = gtp.ImageUtils.resize(image, self._scale);\r\n\t\t\t\tconst gtpImage: gtp.Image = new gtp.Image(canvas);\r\n\t\t\t\tif (firstPixelTranslucent) {\r\n\t\t\t\t\tgtpImage.makeColorTranslucent(0, 0);\r\n\t\t\t\t}\r\n\t\t\t\tself._completed(id, gtpImage);\r\n\t\t\t});\r\n\r\n\t\t\timage.src = imageSrc;\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Starts loading a sound resource.\r\n\t\t * @param {string} id The ID to use when retrieving this resource.\r\n\t\t * @param {string} soundSrc The URL of the resource.\r\n\t\t * @param {number} [loopStart=0] Where to start, in seconds, if/when this\r\n\t\t *        sound loops (which is typical when using a sound as music).\r\n\t\t * @param {boolean} [loopByDefaultIfMusic=true] Whether this sound should\r\n\t\t *        loop by default when it is played as music.\r\n\t\t */\r\n\t\taddSound(id: string, soundSrc: string, loopStart: number = 0,\r\n\t\t\t\tloopByDefaultIfMusic: boolean = true) {\r\n\r\n\t\t\tif (this.audio.isInitialized()) {\r\n\r\n\t\t\t\tif (this._isAlreadyTracked(id)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.loadingAssetData[id] = { type: gtp.AssetType.AUDIO };\r\n\r\n\t\t\t\tif (this._assetRoot) {\r\n\t\t\t\t\tsoundSrc = this._assetRoot + soundSrc;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst self: AssetLoader = this;\r\n\t\t\t\tconst xhr: XMLHttpRequest = new XMLHttpRequest();\r\n\t\t\t\txhr.onload = function() {\r\n\t\t\t\t\t// TODO: Clean up this API\r\n\t\t\t\t\tself.audio.context.decodeAudioData(xhr.response, (buffer: AudioBuffer) => {\r\n\t\t\t\t\t\tconst sound: gtp.Sound = new gtp.Sound(id, buffer, loopStart || 0);\r\n\t\t\t\t\t\tif (typeof loopByDefaultIfMusic !== 'undefined') {\r\n\t\t\t\t\t\t\tsound.setLoopsByDefaultIfMusic(loopByDefaultIfMusic);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.audio.addSound(sound);\r\n\t\t\t\t\t\tself._completed(id, buffer);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\txhr.open('GET', soundSrc, true);\r\n\t\t\t\txhr.responseType = 'arraybuffer';\r\n\t\t\t\txhr.send(null);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Starts loading a sprite sheet resource.\r\n\t\t * @param {string} id The ID to use when retrieving this resource.\r\n\t\t * @param {string} imageSrc The URL of the resource.\r\n\t\t * @param {int} cellW The width of a cell.\r\n\t\t * @param {int} cellH The height of a cell.\r\n\t\t * @param {int} spacingX The horizontal spacing between cells.  Assumed to\r\n\t\t *        be 0 if not defined.\r\n\t\t * @param {int} spacingY The vertical spacing between cells.  Assumed to\r\n\t\t *        be 0 if not defined.\r\n\t\t * @param {boolean} firstPixelTranslucent If truthy, the pixel at (0, 0)\r\n\t\t *        is made translucent, along with all other pixels of the same color.\r\n\t\t */\r\n\t\taddSpriteSheet(id: string, imageSrc: string, cellW: number, cellH: number,\r\n\t\t\t\tspacingX: number = 0, spacingY: number = 0,\r\n\t\t\t\tfirstPixelTranslucent: boolean = false) {\r\n\r\n\t\t\tconst self: AssetLoader = this;\r\n\t\t\tspacingX = spacingX || 0;\r\n\t\t\tspacingY = spacingY || 0;\r\n\t\t\tcellW *= self._scale;\r\n\t\t\tcellH *= self._scale;\r\n\t\t\tspacingX *= self._scale;\r\n\t\t\tspacingY *= self._scale;\r\n\r\n\t\t\tif (this._assetRoot) {\r\n\t\t\t\timageSrc = this._assetRoot + imageSrc;\r\n\t\t\t}\r\n\r\n\t\t\tconst image: HTMLImageElement = document.createElement('img'); //new Image();\r\n\t\t\tif (this._isAlreadyTracked(id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.loadingAssetData[id] = { type: gtp.AssetType.IMAGE };\r\n\t\t\tconsole.log('Adding: ' + id + ' => ' + imageSrc +\r\n\t\t\t\t', remaining == ' + gtp.Utils.getObjectSize(this.loadingAssetData) +\r\n\t\t\t\t', callback == ' + (this.callback !== null));\r\n\t\t\timage.addEventListener('load', () => {\r\n\t\t\t\tconst canvas: HTMLCanvasElement = gtp.ImageUtils.resize(image, self._scale);\r\n\t\t\t\tconst gtpImage: gtp.Image = new gtp.Image(canvas);\r\n\t\t\t\tif (firstPixelTranslucent) {\r\n\t\t\t\t\tgtpImage.makeColorTranslucent(0, 0);\r\n\t\t\t\t}\r\n\t\t\t\tconst ss: SpriteSheet = new gtp.SpriteSheet(gtpImage, cellW, cellH, spacingX, spacingY);\r\n\t\t\t\tself._completed(id, ss);\r\n\t\t\t});\r\n\r\n\t\t\timage.src = imageSrc;\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Registers all images needed by the TMX map's tilesets to this asset\r\n\t\t * loader.\r\n\t\t *\r\n\t\t * @param {tiled.TiledMap} map The Tiled map.\r\n\t\t */\r\n\t\taddTmxMap(map: tiled.TiledMap) {\r\n\t\t\tif (map.tilesets && map.tilesets.length) {\r\n\t\t\t\tfor (let i: number = 0; i < map.tilesets.length; i++) {\r\n\t\t\t\t\tconst tileset: tiled.TiledTileset = map.tilesets[i];\r\n\t\t\t\t\tconst id: string = '_tilesetImage_' + tileset.name;\r\n\t\t\t\t\tthis.addImage(id, tileset.image);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the image corresponding to a Tiled tileset.  This method is\r\n\t\t * called by the library and is typically not called directly by the\r\n\t\t * application.\r\n\t\t *\r\n\t\t * @param {tiled.TiledTileset} tileset The tile set.\r\n\t\t * @return {gtp.Image} The tileset image.\r\n\t\t */\r\n\t\tgetTmxTilesetImage(tileset: tiled.TiledTileset): gtp.Image {\r\n\t\t\treturn this.responses['_tilesetImage_' + tileset.name];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Retrieves a resource by ID.\r\n\t\t * @param {string} res The ID of the resource.\r\n\t\t * @return The resource, or null if not found.\r\n\t\t */\r\n\t\tget(res: string): any {\r\n\t\t\treturn this.responses[res];\r\n\t\t}\r\n\r\n\t\t_isAlreadyTracked(id: string) {\r\n\t\t\tif (this.loadingAssetData[id]) {\r\n\t\t\t\tconsole.log('A resource with id ' + id + ' is already loading.  Assuming they are the same');\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse if (this.responses[id]) {\r\n\t\t\t\tconsole.log('A resource with id ' + id + ' has already been loaded.');\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Adds a resource.\r\n\t\t * @param {string} res The ID for the resource.\r\n\t\t * @param {any} value The resource value.\r\n\t\t */\r\n\t\tset(res: string, value: any) {\r\n\t\t\tthis.responses[res] = value;\r\n\t\t}\r\n\r\n\t\t_completed(res: string, response: any) {\r\n\t\t\tif (!this.loadingAssetData[res]) {\r\n\t\t\t\tconsole.error('Resource not found! - ' + res);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.loadingAssetData[res].type === gtp.AssetType.JSON) {\r\n\t\t\t\tresponse = JSON.parse(response);\r\n\t\t\t}\r\n\t\t\tthis.responses[res] = response;\r\n\t\t\tdelete this.loadingAssetData[res];\r\n\t\t\tconsole.log('Completed: ' + res + ', remaining == ' +\r\n\t\t\t\t\tgtp.Utils.getObjectSize(this.loadingAssetData) +\r\n\t\t\t\t\t', callback == ' + (this.callback !== null));\r\n\t\t\tif (this.isDoneLoading() && this.callback) {\r\n\t\t\t\tthis.callback.call();\r\n\t\t\t\tdelete this.callback;\r\n\t\t\t\tconsole.log('... Callback called and deleted (callback == ' + (this.callback !== null) + ')');\r\n\t\t\t\tif (this.nextCallback) {\r\n\t\t\t\t\tthis.callback = this.nextCallback;\r\n\t\t\t\t\tdelete this.nextCallback;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.log('... Not running callback - ' + this.isDoneLoading() + ', ' + (this.callback !== null));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether all assets in thie loader have successfully loaded.\r\n\t\t *\r\n\t\t * @return {boolean} Whether all assets have loaded.\r\n\t\t */\r\n\t\tisDoneLoading(): boolean {\r\n\t\t\treturn gtp.Utils.getObjectSize(this.loadingAssetData) === 0;\r\n\t\t}\r\n\r\n\t\tonLoad(callback: Function) {\r\n\r\n\t\t\tif (this.isDoneLoading()) {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t\telse if (this.callback) { // A new callback added from another callback\r\n\t\t\t\tthis.nextCallback = callback;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\texport enum AssetType {\r\n\t\tUNKNOWN = 0,\r\n\t\tIMAGE = 1,\r\n\t\tAUDIO = 2,\r\n\t\tJSON = 3\r\n\t}\r\n}","module gtp {\r\n\t'use strict';\r\n\r\n\tinterface _PlayingSoundConfig {\r\n\t\taudioSystem: AudioSystem;\r\n\t\tid: number;\r\n\t\tsoundId: string;\r\n\t\tloop: boolean;\r\n\t\tbuffer: AudioBuffer;\r\n\t\tconnectTo: AudioNode|AudioNode[];\r\n\t\tonendedGenerator: Function;\r\n\t\tstartOffset?: number;\r\n\t}\r\n\r\n\t/**\r\n\t * A sound effect that is currently being played.\r\n\t */\r\n\tclass PlayingSound {\r\n\r\n\t\tid: number;\r\n\t\tsoundId: string;\r\n\t\tsource: AudioBufferSourceNode;\r\n\t\t_config: _PlayingSoundConfig;\r\n\t\t_startOffset: number;\r\n\t\t_paused: boolean;\r\n\t\t_start: number;\r\n\t\t_playedTime: number;\r\n\r\n\t\tconstructor(config: _PlayingSoundConfig) {\r\n\t\t\tthis._config = config;\r\n\t\t\tthis._paused = false;\r\n\t\t}\r\n\r\n\t\tprivate _initFromConfig() {\r\n\r\n\t\t\tthis.id = this._config.id;\r\n\t\t\tthis.soundId = this._config.soundId;\r\n\r\n\t\t\tthis.source = this._config.audioSystem.context.createBufferSource();\r\n\t\t\tthis.source.loop = this._config.loop;\r\n\t\t\tthis.source.buffer = this._config.buffer;\r\n\t\t\tif (this._config.connectTo instanceof AudioNode) {\r\n\t\t\t\tthis.source.connect(<AudioNode>this._config.connectTo);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet nodes: AudioNode[] = <AudioNode[]>this._config.connectTo;\r\n\t\t\t\tnodes.forEach((node: AudioNode) => {\r\n\t\t\t\t\tthis.source.connect(node);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis._startOffset = this._config.startOffset || 0;\r\n\r\n\t\t\tif (!this._config.loop) {\r\n\t\t\t\tlet self: PlayingSound = this;\r\n\t\t\t\tlet audioSystem: AudioSystem = this._config.audioSystem;\r\n\t\t\t\tthis.source.onended = this._config.onendedGenerator(self.id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpause() {\r\n\t\t\tif (!this._paused) {\r\n\t\t\t\tthis.source.stop();\r\n\t\t\t\tthis._playedTime += this.source.context.currentTime - this._start;\r\n\t\t\t\tthis._paused = true;\r\n\t\t\t\tthis._start = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresume() {\r\n\t\t\tif (this._paused) {\r\n\t\t\t\tthis._paused = false;\r\n\t\t\t\tlet prevStartOffset: number = this._startOffset;\r\n\t\t\t\tthis._initFromConfig();\r\n\t\t\t\tthis._startOffset = prevStartOffset + this._playedTime;\r\n\t\t\t\tthis._startOffset = this._startOffset % this.source.buffer.duration;\r\n\t\t\t\tlet curAudioTime: number = this.source.context.currentTime;\r\n\t\t\t\tthis.source.start(curAudioTime, this._startOffset);\r\n\t\t\t\tthis._start = curAudioTime;\r\n\t\t\t\tthis._playedTime = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tstart() {\r\n\t\t\tthis._paused = false;\r\n\t\t\tthis._initFromConfig();\r\n\t\t\tlet curAudioTime: number = this.source.context.currentTime;\r\n\t\t\tthis.source.start(curAudioTime, this._startOffset);\r\n\t\t\tthis._start = curAudioTime;\r\n\t\t\tthis._playedTime = 0;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\texport class AudioSystem {\r\n\r\n\t\tprivate _currentMusic: AudioBufferSourceNode;\r\n\t\tprivate _sounds: { [id: string]: gtp.Sound };\r\n\t\tprivate _musicFade: number;\r\n\t\tprivate _fadeMusic: boolean;\r\n\t\tprivate _muted: boolean;\r\n\t\tprivate _initialized: boolean;\r\n\r\n\t\tcontext: AudioContext;\r\n\t\tprivate _volumeFaderGain: GainNode;\r\n\t\tprivate _musicFaderGain: GainNode;\r\n\t\tprivate currentMusicId: string;\r\n\t\tprivate _musicLoopStart: number;\r\n\r\n\t\t/**\r\n\t\t * A list of all sound effects currently being played.  If a sound effect\r\n\t\t * is not looping (which is likely typical), it will be removed from this\r\n\t\t * list when it completes.  This data structure allows us to pause all sound\r\n\t\t * effects at the same time.\r\n\t\t */\r\n\t\tprivate _playingSounds: PlayingSound[];\r\n\r\n\t\t/**\r\n\t\t * Used to give all playing sound effects unique ids.\r\n\t\t */\r\n\t\tprivate _soundEffectIdGenerator: number;\r\n\r\n\t\t/**\r\n\t\t * A wrapper around web audio for games.\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t */\r\n\t\tconstructor() {\r\n\t\t\tthis._currentMusic = null;\r\n\t\t\tthis._sounds = {};\r\n\t\t\tthis._musicFade = 0.3; // seconds\r\n\t\t\tthis._fadeMusic = true;\r\n\t\t\tthis._muted = false;\r\n\t\t\tthis._playingSounds = [];\r\n\t\t\tthis._soundEffectIdGenerator = 0;\r\n\t\t}\r\n\r\n\t\tprivate _createPlayingSound(id: string, loop: boolean = false,\r\n\t\t\t\tstartOffset: number = 0, doneCallback: Function = null): PlayingSound {\r\n\r\n\t\t\tlet self: AudioSystem = this;\r\n\r\n\t\t\tlet soundEffectId: number = this._createSoundEffectId();\r\n\r\n\t\t\tlet soundEffect: PlayingSound = new PlayingSound({\r\n\t\t\t\taudioSystem: this,\r\n\t\t\t\tbuffer: this._sounds[id].getBuffer(),\r\n\t\t\t\tconnectTo: this._volumeFaderGain,\r\n\t\t\t\tid: soundEffectId,\r\n\t\t\t\tloop: loop,\r\n\t\t\t\tonendedGenerator: function(playingSoundId: number) {\r\n\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\tself._removePlayingSound(playingSoundId);\r\n\t\t\t\t\t\tif (doneCallback) {\r\n\t\t\t\t\t\t\tdoneCallback(soundEffectId, id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tsoundId: id,\r\n\t\t\t\tstartOffset: startOffset,\r\n\t\t\t});\r\n\t\t\treturn soundEffect;\r\n\t\t}\r\n\r\n\t\tprivate _createSoundEffectId(): number {\r\n\t\t\treturn this._soundEffectIdGenerator++;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Initializes the audio system.\r\n\t\t */\r\n\t\tinit() {\r\n\t\t\ttry {\r\n\t\t\t\twindow.AudioContext = window.AudioContext || window.webkitAudioContext;\r\n\t\t\t\tthis.context = new window.AudioContext();\r\n\t\t\t\tthis._volumeFaderGain = this.context.createGain();\r\n\t\t\t\tthis._volumeFaderGain.gain.setValueAtTime(1, this.context.currentTime);\r\n\t\t\t\tthis._volumeFaderGain.gain.value = 1;\r\n\t\t\t\tthis._volumeFaderGain.connect(this.context.destination);\r\n\t\t\t\tthis._initialized = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error('The Web Audio API is not supported in this browser.');\r\n\t\t\t\tthis._initialized = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Registers a sound for later playback.\r\n\t\t * @param sound {gtp.Sound} The sound.\r\n\t\t */\r\n\t\taddSound(sound: gtp.Sound) {\r\n\t\t\tif (this.context) {\r\n\t\t\t\tthis._sounds[sound.getId()] = sound;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfadeOutMusic(newMusicId: string) {\r\n\r\n\t\t\tif (this.context) {\r\n\t\t\t\tif (this._currentMusic) {\r\n\t\t\t\t\tif (!this._muted) {\r\n\t\t\t\t\t\t// We must \"anchor\" via setValueAtTime() before calling a *rampToValue() method (???)\r\n\t\t\t\t\t\tthis._musicFaderGain.gain.setValueAtTime(this._musicFaderGain.gain.value, this.context.currentTime);\r\n\t\t\t\t\t\tthis._musicFaderGain.gain.linearRampToValueAtTime(0, this.context.currentTime + this._musicFade);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar that: AudioSystem = this;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthat.playMusic(newMusicId);\r\n\t\t\t\t\t}, this._musicFade * 1000);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.playMusic(newMusicId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the ID of the current music being played.\r\n\t\t *\r\n\t\t * @return {string} The current music's ID.\r\n\t\t * @see playMusic\r\n\t\t * @see stopMusic\r\n\t\t */\r\n\t\tgetCurrentMusic(): string {\r\n\t\t\treturn this.currentMusicId;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether the audio system initialized properly.  This will return\r\n\t\t * false if the user's browser does not support the web audio API.\r\n\t\t * @return {boolean} Whether the sound system is initialized\r\n\t\t */\r\n\t\tisInitialized(): boolean {\r\n\t\t\treturn this._initialized;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Pauses all music and sound effects.\r\n\t\t * @see resumeAll\r\n\t\t */\r\n\t\tpauseAll() {\r\n\t\t\tthis._playingSounds.forEach((sound: PlayingSound) => {\r\n\t\t\t\tsound.pause();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Plays a specific sound as background music.  Only one \"music\" can play\r\n\t\t * at a time, as opposed to \"sounds,\" of which multiple can be playing at\r\n\t\t * one time.\r\n\t\t * @param {string} id The ID of the resource to play as music.  If this is\r\n\t\t *        <code>null</code>, the current music is stopped but no new music\r\n\t\t *        is started.\r\n\t\t * @param {boolean} loop Whether the music should loop.\r\n\t\t * @see stopMusic\r\n\t\t */\r\n\t\tplayMusic(id: string, loop?: boolean) {\r\n\r\n\t\t\tif (this.context) {\r\n\r\n\t\t\t\t// Note: We destroy and recreate _musicFaderGain each time, because\r\n\t\t\t\t// it appears to occasionally start playing muted if we do not do\r\n\t\t\t\t// so, even when gain.value===1, on Chrome 38.\r\n\t\t\t\tif (this._currentMusic) {\r\n\t\t\t\t\tthis.stopMusic(false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!id) {\r\n\t\t\t\t\treturn; // null id => don't play any music\r\n\t\t\t\t}\r\n\t\t\t\tvar sound: Sound = this._sounds[id];\r\n\t\t\t\tif (typeof loop === 'undefined') {\r\n\t\t\t\t\tloop = sound.getLoopsByDefaultIfMusic();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._musicFaderGain = this.context.createGain();\r\n\t\t\t\tthis._musicFaderGain.gain.setValueAtTime(1, this.context.currentTime);\r\n\t\t\t\tthis._musicFaderGain.gain.value = 1;\r\n\t\t\t\tthis._currentMusic = this.context.createBufferSource();\r\n\t\t\t\tthis._currentMusic.loop = loop;\r\n\t\t\t\tthis._musicLoopStart = sound.getLoopStart() || 0;\r\n\t\t\t\tthis._currentMusic.loopStart = this._musicLoopStart;\r\n\t\t\t\tthis._currentMusic.buffer = sound.getBuffer();\r\n\t\t\t\tthis._currentMusic.loopEnd = this._currentMusic.buffer.duration;\r\n\t\t\t\tthis._currentMusic.connect(this._musicFaderGain);\r\n\t\t\t\tthis._musicFaderGain.connect(this._volumeFaderGain);\r\n\t\t\t\tthis._currentMusic.start(0);\r\n\t\t\t\tthis.currentMusicId = id;\r\n\t\t\t\tconsole.log('Just started new music with id: ' + id + ', loop: ' + loop);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Plays the sound with the given ID.\r\n\t\t * @param {string} id The ID of the resource to play.\r\n\t\t * @param {boolean} loop Whether the music should loop.  Defaults to\r\n\t\t *        <code>false</code>.\r\n\t\t * @param {Function} doneCallback An optional callback to call when the\r\n\t\t *        sound completes. This callback will receive the returned numeric\r\n\t\t *        ID as a parameter.  This parameter is ignored if <code>loop</code>\r\n\t\t *        is <code>true</code>.\r\n\t\t * @return {number} An ID for the playing sound.  This can be used to\r\n\t\t *         stop a looping sound via <code>stopSound(id)</code>.\r\n\t\t * @see stopSound\r\n\t\t */\r\n\t\tplaySound(id: string, loop: boolean = false, doneCallback: Function = null): number {\r\n\t\t\tif (this.context) {\r\n\r\n\t\t\t\tlet playingSound: PlayingSound = this._createPlayingSound(id, loop, 0,\r\n\t\t\t\t\t\tdoneCallback);\r\n\t\t\t\tthis._playingSounds.push(playingSound);\r\n\t\t\t\tplayingSound.start();\r\n\t\t\t\treturn playingSound.id;\r\n\t\t\t}\r\n\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Removes a sound from our list of currently-being-played sound effects.\r\n\t\t * @param {gtp.PlayingSound} playingSound The sound effect to stop playing.\r\n\t\t * @return The sound just removed.\r\n\t\t */\r\n\t\tprivate _removePlayingSound(id: number): PlayingSound {\r\n\t\t\tfor (let i: number = 0; i < this._playingSounds.length; i++) {\r\n\t\t\t\tif (this._playingSounds[i].id === id) {\r\n\t\t\t\t\tlet sound: PlayingSound = this._playingSounds[i];\r\n\t\t\t\t\tthis._playingSounds.splice(i, 1);\r\n\t\t\t\t\treturn sound;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Resumes all music and sound effects.\r\n\t\t * @see pauseAll\r\n\t\t */\r\n\t\tresumeAll() {\r\n\r\n\t\t\tfor (let i: number = 0; i < this._playingSounds.length; i++) {\r\n\t\t\t\tlet sound: PlayingSound = this._playingSounds[i];\r\n\t\t\t\tif (sound._paused) {\r\n\t\t\t\t\tsound.resume();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Stops the currently playing music, if any.\r\n\t\t * @param {boolean} pause If <code>true</code>, the music is only paused;\r\n\t\t *        otherwise, native resources are freed and the music cannot be\r\n\t\t *        resumed.\r\n\t\t * @see playMusic\r\n\t\t */\r\n\t\tstopMusic(pause: boolean = false) {\r\n\t\t\tthis._currentMusic.stop();\r\n\t\t\tif (!pause) {\r\n\t\t\t\tthis._currentMusic.disconnect();\r\n\t\t\t\tthis._musicFaderGain.disconnect();\r\n\t\t\t\tdelete this._currentMusic;\r\n\t\t\t\tdelete this._musicFaderGain;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Stops a playing sound, by ID.\r\n\t\t * @param {number} id The sound effect to stop.\r\n\t\t * @return {boolean} Whether the sound effect was stopped.  This will be\r\n\t\t *         <code>false</code> if the sound effect specified is no longer\r\n\t\t *         playing.\r\n\t\t * @see playSound\r\n\t\t */\r\n\t\tstopSound(id: number): boolean {\r\n\t\t\tvar sound: PlayingSound = this._removePlayingSound(id);\r\n\t\t\tif (sound) {\r\n\t\t\t\tsound.source.stop();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\ttoggleMuted(): boolean {\r\n\t\t\tthis._muted = !this._muted;\r\n\t\t\tif (this.context) {\r\n\t\t\t\tvar initialValue: number = this._muted ? 0 : 1;\r\n\t\t\t\tthis._volumeFaderGain.gain.setValueAtTime(initialValue, this.context.currentTime);\r\n\t\t\t\tthis._volumeFaderGain.gain.value = initialValue;\r\n\t\t\t}\r\n\t\t\treturn this._muted;\r\n\t\t}\r\n\r\n\t\tget fadeMusic(): boolean {\r\n\t\t\t'use strict';\r\n\t\t\treturn this._fadeMusic;\r\n\t\t}\r\n\r\n\t\tset fadeMusic(fade: boolean) {\r\n\t\t\tthis._fadeMusic = fade;\r\n\t\t}\r\n\r\n\t\tget musicFadeSeconds(): number {\r\n\t\t\treturn this._musicFade;\r\n\t\t}\r\n\r\n\t\tset musicFadeSeconds(seconds: number) {\r\n\t\t\tthis._musicFade = seconds;\r\n\t\t}\r\n\t}\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\texport class BitmapFont extends SpriteSheet {\r\n\r\n\t\tconstructor(gtpImage: Image, cellW: number, cellH: number, spacing: number, spacingY: number) {\r\n\t\t\tsuper(gtpImage, cellW, cellH, spacing, spacingY);\r\n\t\t}\r\n\r\n\t\tdrawString(str: string, x: number, y: number) {\r\n\r\n\t\t\tvar glyphCount: number = this.size;\r\n\t\t\tvar ctx: CanvasRenderingContext2D = window.game.canvas.getContext('2d');\r\n\t\t\tvar charWidth: number = this.cellW;\r\n\r\n\t\t\tfor (var i: number = 0; i < str.length; i++) {\r\n\t\t\t\tvar ch: number = str.charCodeAt(i) - 0x20;\r\n\t\t\t\tif (ch < 0 || ch >= glyphCount) {\r\n\t\t\t\t\tch = 0;\r\n\t\t\t\t}\r\n\t\t\t\tthis.drawByIndex(ctx, x, y, ch);\r\n\t\t\t\tx += charWidth;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n}","module gtp {\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * Utility methods for interfacing with browser APIs.  This stuff is\r\n\t * typically hard to unit test, and thus is in this class so it is easily\r\n\t * mockable.\r\n\t * \r\n\t * @constructor\r\n\t */\r\n\texport class BrowserUtil {\r\n\r\n\t\t/**\r\n\t\t * Returns <code>window.location.search</code>.\r\n\t\t */\r\n\t\tstatic getWindowLocationSearch(): string {\r\n\t\t\treturn window.location.search;\r\n\t\t}\r\n\t}\r\n}","module gtp {\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * Arguments to the Delay constructor.\r\n\t */\r\n\texport interface DelayArgs {\r\n\t\tmillis: any;\r\n\t\tminDelta?: number;\r\n\t\tmaxDelta?: number;\r\n\t\tcallback?: Function;\r\n\t\tloop?: boolean;\r\n\t\tloopCount?: number;\r\n\t}\r\n\r\n\t/**\r\n\t * A way to keep track of a delay.  Useful when you want some event to occur\r\n\t * every X milliseconds, for example.\r\n\t *\r\n\t * @param {object} args Arguments to this delay.\r\n\t * @param {number-or-array} args.millis The number of milliseconds between\r\n\t *        events.  You can specify an array of numbers to have the even trigger\r\n\t *        at non-equal intervals.\r\n\t * @param {int} [args.minDelta] If specified, a minimum amount of variance for\r\n\t *        the event.  May be negative, but should be larger than the smallest\r\n\t *        value specified in millis.\r\n\t * @param {int} [args.maxDelta] If specified, a maximum amount of variance for\r\n\t *        the event.\r\n\t * @param {int} [args.loop] If specified and <code>true</code>, this timer will\r\n\t *        automatically repeat and <code>isDone()</code> will never return\r\n\t *        <code>true</code>.\r\n\t * @param {int} [args.loopCount] This argument is only honored if\r\n\t *        <code>args.loop</code> is defined and <code>true</code>.  If true,\r\n\t *        this argument is the number of times to loop; if this argument is not\r\n\t *        specified, looping will occur indefinitely.\r\n\t * @param {function} [args.callback] If specified, a callback function that\r\n\t *        will be called when this delay fires.\r\n\t * @constructor\r\n\t */\r\n\texport class Delay {\r\n\r\n\t\t_initial: number[];\r\n\t\t_initialIndex: number;\r\n\t\t_callback: Function;\r\n\t\t_loop: boolean;\r\n\t\t_loopCount: number;\r\n\t\t_maxLoopCount: number;\r\n\t\t_minDelta: number;\r\n\t\t_maxDelta: number;\r\n\t\t_remaining: number;\r\n\t\t_curInitial: number;\r\n\r\n\t\tconstructor(args: DelayArgs) {\r\n\t\t\tif (!args || !args.millis) {\r\n\t\t\t\tthrow 'Missing required \"millis\" argument to gtp.Delay';\r\n\t\t\t}\r\n\t\t\tthis._initial = args.millis.length ? args.millis : [args.millis];\r\n\t\t\tthis._initialIndex = 0;\r\n\t\t\tif (args.minDelta && args.maxDelta) {\r\n\t\t\t\tthis.setRandomDelta(args.minDelta, args.maxDelta);\r\n\t\t\t}\r\n\t\t\tthis._callback = args.callback;\r\n\t\t\tthis._loop = !!args.loop;\r\n\t\t\tthis._loopCount = 0;\r\n\t\t\tthis._maxLoopCount = this._loop ? (args.loopCount || -1) : -1;\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Should be called in the update() method of the current game state to\r\n\t\t * update this Delay.\r\n\t\t *\r\n\t\t * @param {int} delta The time that has elapsed since the last call to this\r\n\t\t *        method.\r\n\t\t */\r\n\t\tupdate(delta: number) {\r\n\t\t\tif (this._remaining > 0) {\r\n\t\t\t\tthis._remaining -= delta;\r\n\t\t\t\tif (this._remaining <= 0 && this._callback) {\r\n\t\t\t\t\tthis._callback(this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._remaining <= 0) {\r\n\t\t\t\tif (this._loop) {\r\n\t\t\t\t\tif (this._maxLoopCount === -1 || this._loopCount < this._maxLoopCount - 1) {\r\n\t\t\t\t\t\tthis._loopCount++;\r\n\t\t\t\t\t\tthis.reset(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis._loopCount = this._maxLoopCount;\r\n\t\t\t\t\t\tthis._remaining = -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._remaining = Math.max(0, this._remaining);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this.isDone();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the number of times this Delay has looped.\r\n\t\t *\r\n\t\t * @return {int} The number of times this Delay has looped.\r\n\t\t */\r\n\t\tgetLoopCount(): number {\r\n\t\t\treturn this._loopCount;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the maximum delta value, or -1 if none was defined.\r\n\t\t *\r\n\t\t * @return {int} The maximum delta value.\r\n\t\t * @see getMinDelta()\r\n\t\t */\r\n\t\tgetMaxDelta(): number {\r\n\t\t\treturn typeof this._maxDelta !== 'undefined' ? this._maxDelta : -1;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the minimum delta value, or -1 if none was defined.\r\n\t\t *\r\n\t\t * @return {int} The minimum delta value.\r\n\t\t * @see getMaxDelta()\r\n\t\t */\r\n\t\tgetMinDelta(): number {\r\n\t\t\treturn typeof this._minDelta !== 'undefined' ? this._minDelta : -1;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the remaining time on this delay.\r\n\t\t *\r\n\t\t * @return {int} The remaining time on this delay.\r\n\t\t */\r\n\t\tgetRemaining(): number {\r\n\t\t\treturn this._remaining;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns how far along we are in this delay, in the range\r\n\t\t * 0 - 1.\r\n\t\t *\r\n\t\t * @return {int} How far along we are in this delay.\r\n\t\t */\r\n\t\tgetRemainingPercent(): number {\r\n\t\t\treturn this._remaining / this._curInitial;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether this Delay has completed.\r\n\t\t *\r\n\t\t * @return {boolean} Whether this Delay has completed.\r\n\t\t */\r\n\t\tisDone(): boolean {\r\n\t\t\treturn (!this._loop || this._loopCount === this._maxLoopCount) &&\r\n\t\t\t\tthis._remaining <= 0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Causes this delay to trigger with a little random variance.\r\n\t\t *\r\n\t\t * @param {int} min The minimum possible variance, inclusive.\r\n\t\t * @param {int} max The maximum possible variance, exclusive.\r\n\t\t */\r\n\t\tsetRandomDelta(min: number, max: number) {\r\n\t\t\tthis._minDelta = min;\r\n\t\t\tthis._maxDelta = max;\r\n\t\t}\r\n\r\n\t\treset(smooth?: boolean) {\r\n\t\t\tsmooth = !!smooth;\r\n\t\t\tvar prevRemaining: number = this._remaining;\r\n\t\t\tthis._curInitial = this._remaining = this._initial[this._initialIndex];\r\n\t\t\tif (smooth && prevRemaining < 0) {\r\n\t\t\t\tthis._remaining += prevRemaining; // Subtract how much we went over\r\n\t\t\t}\r\n\t\t\tthis._initialIndex = (this._initialIndex + 1) % this._initial.length;\r\n\t\t\tif (this._minDelta || this._maxDelta) {\r\n\t\t\t\t//\t\t\t\tthis._remaining += gtp.Utils.randomInt(this._minDelta, this._maxDelta);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttoString() {\r\n\t\t\treturn '[gtp.Delay: _initial=' + this._initial +\r\n\t\t\t\t', _remaining=' + this._remaining +\r\n\t\t\t\t', _loop=' + this._loop +\r\n\t\t\t\t', _callback=' + (this._callback != null) +\r\n\t\t\t\t']';\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\texport class FadeOutInState extends gtp.State {\r\n\r\n\t\tprivate _leavingState: State;\r\n\t\tprivate _enteringState: State;\r\n\t\tprivate _transitionLogic: Function;\r\n\t\tprivate _fadingOut: boolean;\r\n\t\tprivate _alpha: number;\r\n\t\tprivate _halfTime: number;\r\n\t\tprivate _curTime: number;\r\n\r\n\t\t/**\r\n\t\t * Fades one state out and another state in.\r\n\t\t * \r\n\t\t * @constructor\r\n\t\t */\r\n\t\tconstructor(leavingState: gtp.State, enteringState: State,\r\n\t\t\ttransitionLogic?: Function, timeMillis?: number) {\r\n\t\t\tsuper();\r\n\t\t\tthis._leavingState = leavingState;\r\n\t\t\tthis._enteringState = enteringState;\r\n\t\t\tthis._transitionLogic = transitionLogic;\r\n\t\t\tthis._fadingOut = true;\r\n\t\t\tthis._alpha = 1;\r\n\t\t\tthis._halfTime = timeMillis && timeMillis > 0 ? timeMillis / 2 : 800;\r\n\t\t\tthis._curTime = 0;\r\n\t\t}\r\n\r\n\t\tupdate(delta: number) {\r\n        \r\n\t\t\tsuper.update(delta);\r\n\t\t\t//         console.log('delta === ' + delta);\r\n\t\t\tthis._curTime += delta;\r\n\t\t\tif (this._curTime >= this._halfTime) {\r\n\t\t\t\tthis._curTime -= this._halfTime;\r\n\t\t\t\tif (this._fadingOut) {\r\n\t\t\t\t\tthis._fadingOut = false;\r\n\t\t\t\t\tif (this._transitionLogic) {\r\n\t\t\t\t\t\tthis._transitionLogic();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._setState(this._enteringState);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this._fadingOut) {\r\n\t\t\t\tthis._alpha = 1 - (this._curTime / this._halfTime);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._alpha = (this._curTime / this._halfTime);\r\n\t\t\t}\r\n\t\t}\r\n   \r\n\t\trender(ctx: CanvasRenderingContext2D) {\r\n\r\n\t\t\tsuper.render(ctx);\r\n\t\t\tthis.game.clearScreen();\r\n\r\n\t\t\tvar previousAlpha: number = ctx.globalAlpha;\r\n\t\t\tctx.globalAlpha = this._alpha;\r\n\t\t\tif (this._fadingOut) {\r\n\t\t\t\tthis._leavingState.render(ctx);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._enteringState.render(ctx);\r\n\t\t\t}\r\n\t\t\tctx.globalAlpha = previousAlpha;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Sets the new game state.  This is a hook for subclasses to perform\r\n\t\t * extra logic.\r\n\t\t *\r\n\t\t * @param state The new state.\r\n\t\t */\r\n\t\tprivate _setState(state: State) {\r\n\t\t\tthis.game.setState(this._enteringState);\r\n\t\t}\r\n\t}\r\n}","module gtp {\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * A base class for a game.\r\n\t *\r\n\t * @constructor\r\n\t */\r\n\texport class Game {\r\n\r\n\t\t/*private */_scale: number;\r\n\t\tcanvas: HTMLCanvasElement;\r\n\t\tinputManager: gtp.InputManager;\r\n\t\t_targetFps: number;\r\n\t\t_interval: number;\r\n\t\tlastTime: number;\r\n\t\taudio: gtp.AudioSystem;\r\n\t\tassets: gtp.AssetLoader;\r\n\t\tclearScreenColor: string;\r\n\t\tfpsColor: string;\r\n\t\tstatusMessageRGB: string;\r\n\t\tprivate _statusMessageColor: string;\r\n\t\tshowFps: boolean;\r\n\t\tframes: number;\r\n\t\tprivate _fpsMsg: string;\r\n\t\tprivate _statusMessage: string;\r\n\t\tprivate _statusMessageAlpha: number;\r\n\t\tprivate _statusMessageTime: number;\r\n\t\tstate: gtp.State;\r\n\t\tprivate _gameTimer: _GameTimer;\r\n\t\ttimer: gtp.Timer;\r\n\r\n\t\tconstructor(args: any = {}) {\r\n\r\n\t\t\tgtp.Utils.initConsole();\r\n\r\n\t\t\tthis._scale = args.scale || 1;\r\n\t\t\tthis.canvas = gtp.ImageUtils.createCanvas(args.width, args.height, args.parent);\r\n\r\n\t\t\tthis.inputManager = new gtp.InputManager(args.keyRefreshMillis || 0);\r\n\t\t\tthis.inputManager.install();\r\n\t\t\tthis._targetFps = args.targetFps || 30;\r\n\t\t\tthis._interval = 1000 / this._targetFps;\r\n\t\t\tthis.lastTime = 0;\r\n\r\n\t\t\tthis.audio = new gtp.AudioSystem();\r\n\t\t\tthis.audio.init();\r\n\t\t\tvar assetPrefix: string = args.assetRoot || null;\r\n\t\t\tthis.assets = new gtp.AssetLoader(this._scale, this.audio, assetPrefix);\r\n\r\n\t\t\tthis.clearScreenColor = 'rgb(0,0,0)';\r\n\r\n\t\t\tthis.fpsColor = 'rgb(255,255,255)';\r\n\t\t\tthis.statusMessageRGB = '255,255,255';\r\n\t\t\tthis._statusMessageColor = null;\r\n\t\t\tthis.showFps = false;\r\n\t\t\tthis.frames = 0;\r\n\t\t\tthis._fpsMsg = this._targetFps + ' fps';\r\n\t\t\tthis._statusMessage = null;\r\n\t\t\tthis._statusMessageAlpha = 0;\r\n\r\n\t\t\tthis._gameTimer = new _GameTimer();\r\n\t\t\tthis.timer = new gtp.Timer();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Clears the screen.\r\n\t\t * @param {string} clearScreenColor The color to clear the screen with.\r\n\t\t *        If unspecified, <code>this.clearScreenColor</code> is used.\r\n\t\t */\r\n\t\tclearScreen(clearScreenColor: string = this.clearScreenColor) {\r\n\t\t\tvar ctx: CanvasRenderingContext2D = this.canvas.getContext('2d');\r\n\t\t\tctx.fillStyle = clearScreenColor;\r\n\t\t\tctx.fillRect(0, 0, this.getWidth(), this.getHeight());\r\n\t\t}\r\n\r\n\t\tgetHeight(): number {\r\n\t\t\treturn this.canvas.height;\r\n\t\t}\r\n\r\n\t\tgetWidth(): number {\r\n\t\t\treturn this.canvas.width;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether this game is paused.\r\n\t\t * @return {boolean} Whether this game is paused.\r\n\t\t */\r\n\t\tget paused(): boolean {\r\n\t\t\treturn this._gameTimer.paused;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the length of time the game has been played so far.  This is\r\n\t\t * \"playable time;\" that is, time in which the user is playing, and the\r\n\t\t * game is not paused or in a \"not updating\" state (such as the main\r\n\t\t * frame not having focus).\r\n\t\t *\r\n\t\t * @return The amount of time the game has been played, in milliseconds.\r\n\t\t * @see resetPlayTime\r\n\t\t */\r\n\t\tget playTime(): number {\r\n\t\t\treturn this._gameTimer.playTime;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns a random number between <code>0</code> and\r\n\t\t * <code>number</code>, exclusive.\r\n\t\t *\r\n\t\t * @param max {number} The upper bound, exclusive.\r\n\t\t * @return {number} The random number.\r\n\t\t */\r\n\t\trandomInt(max: number): number {\r\n\t\t\tvar min: number = 0;\r\n\t\t\t// Using Math.round() would give a non-uniform distribution!\r\n\t\t\treturn Math.floor(Math.random() * (max - min + 1) + min);\r\n\t\t}\r\n\r\n\t\trender() {\r\n\r\n\t\t\tvar ctx: CanvasRenderingContext2D = this.canvas.getContext('2d');\r\n\t\t\tthis.state.render(ctx);\r\n\r\n\t\t\tif (this.showFps) {\r\n\t\t\t\tthis._renderFps(ctx);\r\n\t\t\t}\r\n\t\t\tif (this._statusMessage && this._statusMessageAlpha > 0) {\r\n\t\t\t\tthis._renderStatusMessage(ctx);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprivate _renderFps(ctx: CanvasRenderingContext2D) {\r\n\r\n\t\t\tthis.frames++;\r\n\t\t\tvar now: number = Utils.timestamp();\r\n\t\t\tif (this.lastTime === null) {\r\n\t\t\t\tthis.lastTime = now;\r\n\t\t\t}\r\n\t\t\telse if (now - this.lastTime >= 1000) {\r\n\t\t\t\tthis._fpsMsg = this.frames + ' fps';\r\n\t\t\t\tthis.frames = 0;\r\n\t\t\t\tthis.lastTime = now;\r\n\t\t\t}\r\n\r\n\t\t\tvar x: number = 10;\r\n\t\t\tvar y: number = 15;\r\n\t\t\tctx.font = '10pt Arial';\r\n\t\t\tctx.fillStyle = this.fpsColor;\r\n\t\t\tctx.fillText(this._fpsMsg, x, y);\r\n\r\n\t\t}\r\n\r\n\t\tprivate _renderStatusMessage(ctx: CanvasRenderingContext2D) {\r\n\t\t\tvar x: number = 10;\r\n\t\t\tvar y: number = this.canvas.height - 6;\r\n\t\t\tctx.font = '10pt Arial';\r\n\t\t\tctx.fillStyle = this._statusMessageColor;\r\n\t\t\tctx.fillText(this._statusMessage, x, y);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Resets the \"playtime in milliseconds\" timer back to <code>0</code>.\r\n\t\t *\r\n\t\t * @see playTimeMillis\r\n\t\t */\r\n\t\tresetPlayTime() {\r\n\t\t\tthis._gameTimer.resetPlayTime();\r\n\t\t}\r\n\r\n      /**\r\n       * Sets whether the game is paused.  The game is still told to handle\r\n       * input, update itself and render.  This is simply a flag that should\r\n       * be set whenever a \"pause\" screen is displayed.  It stops the \"in-game\r\n       * timer\" until the game is unpaused.\r\n       *\r\n       * @param paused Whether the game should be paused.\r\n       */\r\n\t\tset paused(paused: boolean) {\r\n\t\t\tif (paused) {\r\n\t\t\t\tthis.audio.pauseAll();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.audio.resumeAll();\r\n\t\t\t}\r\n\t\t\tthis._gameTimer.paused = paused;\r\n\t\t}\r\n\r\n\t\tsetState(state: gtp.State) {\r\n\t\t\tif (this.state) {\r\n\t\t\t\tthis.state.leaving(this);\r\n\t\t\t}\r\n\t\t\tthis.state = state;\r\n\t\t\tthis.state.enter(this);\r\n\t\t}\r\n\r\n\t\tsetStatusMessage(message: string) {\r\n\t\t\tthis._statusMessage = message;\r\n\t\t\tthis._statusMessageAlpha = 2.0; // 1.0 of message, 1.0 of fading out\r\n\t\t\tthis._statusMessageTime = Utils.timestamp() + 100;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Starts the game loop.\r\n\t\t */\r\n\t\tstart() {\r\n\t\t\t// e.g. Dojo's lang.hitch()\r\n\t\t\tvar self: Game = this;\r\n\t\t\tvar callback: Function = function() {\r\n\t\t\t\tself._tick.apply(self);\r\n\t\t\t};\r\n\r\n\t\t\tthis._gameTimer.start();\r\n\t\t\tsetInterval(callback, this._interval);\r\n\t\t}\r\n\r\n\t\tprivate _tick() {\r\n\r\n\t\t\tif (this._statusMessage) {\r\n\t\t\t\tvar time: number = Utils.timestamp();\r\n\t\t\t\tif (time > this._statusMessageTime) {\r\n\t\t\t\t\tthis._statusMessageTime = time + 100;\r\n\t\t\t\t\tthis._statusMessageAlpha -= 0.1;\r\n\t\t\t\t\tvar alpha: number = Math.min(1, this._statusMessageAlpha);\r\n\t\t\t\t\tthis._statusMessageColor = 'rgba(' + this.statusMessageRGB + ',' + alpha + ')';\r\n\t\t\t\t\tif (this._statusMessageAlpha <= 0) {\r\n\t\t\t\t\t\tthis._statusMessage = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.update();\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\ttoggleMuted(): boolean {\r\n\t\t\tlet muted: boolean = this.audio.toggleMuted();\r\n\t\t\tthis.setStatusMessage(muted ? 'Audio muted' : 'Audio enabled');\r\n\t\t\treturn muted;\r\n\t\t}\r\n\r\n\t\ttoggleShowFps() {\r\n\t\t\tthis.showFps = !this.showFps;\r\n\t\t\tthis.setStatusMessage('FPS display: ' + (this.showFps ? 'on' : 'off'));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Called during each tick to update game logic.  The default implementation\r\n\t\t * checks for a shortcut key to toggle the FPS display before delegating to\r\n\t\t * the current game state.  Subclasses can override, but typically update\r\n\t\t * logic is handled by game states.\r\n\t\t */\r\n\t\tupdate() {\r\n\r\n\t\t\tvar im: InputManager = this.inputManager;\r\n\t\t\tif (im.isKeyDown(gtp.Keys.KEY_SHIFT)) {\r\n\r\n\t\t\t\tif (im.isKeyDown(gtp.Keys.KEY_F, true)) {\r\n\t\t\t\t\tthis.toggleShowFps();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis.state.update(this._interval);\r\n\r\n\t\t}\r\n\r\n\t}\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\texport class Image {\r\n\r\n\t\tprivate _canvas: HTMLCanvasElement;\r\n\t\tx: number;\r\n\t\ty: number;\r\n\t\tprivate _width: number;\r\n\t\tprivate _height: number;\r\n\r\n\t\t/**\r\n\t\t * A wrapper around images.  Handles browser-specific quirks and other things\r\n\t\t * a game shouldn't have to know about.\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t */\r\n\t\tconstructor(canvas: HTMLCanvasElement, x?: number, y?: number, w?: number, h?: number) {\r\n\t\t\tthis._canvas = canvas;\r\n\t\t\tif (x != null && y != null && w != null && h != null) {\r\n\t\t\t\tthis.x = x;\r\n\t\t\t\tthis.y = y;\r\n\t\t\t\tthis._width = w;\r\n\t\t\t\tthis._height = h;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.x = this.y = 0;\r\n\t\t\t\tthis._width = this._canvas.width;\r\n\t\t\t\tthis._height = this._canvas.height;\r\n\t\t\t}\r\n\t\t\tthis._ensure256Square();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Chrome has trouble copying from a canvas in RAM to a canvas in GPU memory\r\n\t\t * and vice versa, unless all canvases are >= 256x256.\r\n\t\t */\r\n\t\t_ensure256Square() {\r\n\t\t\tif (this._canvas.width < 256 || this._canvas.height < 256) {\r\n\t\t\t\tvar w: number = Math.max(256, this._canvas.width);\r\n\t\t\t\tvar h: number = Math.max(256, this._canvas.height);\r\n\t\t\t\tvar canvas2: HTMLCanvasElement = gtp.ImageUtils.createCanvas(w, h);\r\n\t\t\t\tvar ctx2: CanvasRenderingContext2D = canvas2.getContext('2d');\r\n\t\t\t\tctx2.drawImage(this._canvas, 0, 0);\r\n\t\t\t\tthis._canvas = canvas2;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Draws this image.\r\n\t\t *\r\n\t\t * @param {CanvasRenderingContext2D} ctx A canvas' graphics context.\r\n\t\t * @param {int} x The x-coordinate at which to draw.\r\n\t\t * @param {int} y The y-coordinate at which to draw.\r\n\t\t */\r\n\t\tdraw(ctx: CanvasRenderingContext2D, x: number, y: number) {\r\n\t\t\tif (!gtp.ImageUtils.allowSubpixelImageRendering) {\r\n\t\t\t\tx = Math.round(x);\r\n\t\t\t\ty = Math.round(y);\r\n\t\t\t}\r\n\t\t\tctx.drawImage(this._canvas, this.x, this.y, this._width, this._height,\r\n\t\t\t\tx, y, this._width, this._height);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Draws this image.\r\n\t\t *\r\n\t\t * @param {CanvasRenderingContext2D} ctx A canvas' graphics context.\r\n\t\t * @param {int} x The x-coordinate at which to draw.\r\n\t\t * @param {int} y The y-coordinate at which to draw.\r\n\t\t * @param {int} w The width to (possibly) stretch the image to when\r\n\t\t *              drawing.\r\n\t\t * @param {int} h The height to (possibly) stretch the image to when\r\n\t\t *              drawing.\r\n\t\t */\r\n\t\tdrawScaled(ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) {\r\n\t\t\tif (!gtp.ImageUtils.allowSubpixelImageRendering) {\r\n\t\t\t\tx = Math.round(x);\r\n\t\t\t\ty = Math.round(y);\r\n\t\t\t}\r\n\t\t\tctx.drawImage(this._canvas, this.x, this.y, this._width, this._height,\r\n\t\t\t\tx, y, w, h);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Draws this image.\r\n\t\t *\r\n\t\t * @param {CanvasRenderingContext2D} ctx A canvas' graphics context.\r\n\t\t * @param {int} srcX The x-coordinate at which to draw.\r\n\t\t * @param {int} srcY The y-coordinate at which to draw.\r\n\t\t * @param {int} srcW The width of the (possibly) sub-image to draw.\r\n\t\t * @param {int} srcH The height of the (possibly) sub-image to draw.\r\n\t\t * @param {int} destX The x-coordinate at which to draw.\r\n\t\t * @param {int} destY The y-coordinate at which to draw.\r\n\t\t * @param {int} destW The width to (possibly) stretch the image to when\r\n\t\t *              drawing.\r\n\t\t * @param {int} destH The height to (possibly) stretch the image to when\r\n\t\t *              drawing.\r\n\t\t */\r\n\t\tdrawScaled2(ctx: CanvasRenderingContext2D, srcX: number, srcY: number,\r\n\t\t\t\tsrcW: number, srcH: number,\r\n\t\t\t\tdestX: number, destY: number, destW: number, destH: number) {\r\n\r\n\t\t\tif (!gtp.ImageUtils.allowSubpixelImageRendering) {\r\n\t\t\t\tsrcX = Math.round(srcX);\r\n\t\t\t\tsrcY = Math.round(srcY);\r\n\t\t\t\tdestX = Math.round(destX);\r\n\t\t\t\tdestY = Math.round(destY);\r\n\t\t\t}\r\n\t\t\tsrcX = this.x + srcX;\r\n\t\t\tsrcY = this.y + srcY;\r\n\r\n\t\t\tctx.drawImage(this._canvas, srcX, srcY, srcW, srcH,\r\n\t\t\t\tdestX, destY, destW, destH);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Converts a color of a particular type to completely transparent in this\r\n\t\t * image.\r\n\t\t *\r\n\t\t * @param {int} x The x-coordinate of the pixel whose color to change.  0 will\r\n\t\t *        be used if this parameter is undefined.\r\n\t\t * @param {int} y The y-coordinate of the pixel whose color to change.  0 will\r\n\t\t *        be used if this parameter is undefined.\r\n\t\t * @return {Image} This image, which has been modified.\r\n\t\t * @method\r\n\t\t */\r\n\t\tmakeColorTranslucent(x: number = 0, y: number = 0) {\r\n\t\t\tgtp.ImageUtils.makeColorTranslucent(this._canvas, x, y);\r\n\t\t}\r\n\r\n\t\tget width(): number {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\r\n\t\tget height(): number {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\r\n\t}\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\texport class ImageAtlas {\r\n\r\n\t\tprivate _atlasInfo: any;\r\n\t\tprivate _masterCanvas: HTMLCanvasElement;\r\n\r\n\t\tconstructor(args: any) {\r\n\t\t\tthis._atlasInfo = args.atlasInfo;\r\n\t\t\tthis._masterCanvas = args.canvas;\r\n\t\t\tif (this._atlasInfo.firstPixelIsTranslucent) {\r\n\t\t\t\tthis._masterCanvas = gtp.ImageUtils.makeColorTranslucent(this._masterCanvas);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tparse() {\r\n\r\n\t\t\tvar images: { [id: string]: gtp.Image } = {};\r\n\t\t\tvar self: ImageAtlas = this;\r\n\r\n\t\t\tthis._atlasInfo.images.forEach((imgInfo: any) => {\r\n\r\n\t\t\t\tvar id: string = imgInfo.id;\r\n\t\t\t\tvar dim: any;\r\n\t\t\t\tif (imgInfo.dim) {\r\n\t\t\t\t\tdim = imgInfo.dim.split(/,\\s*/);\r\n\t\t\t\t\tif (dim.length !== 4) {\r\n\t\t\t\t\t\tthrow new Error('Invalid value for imgInfo.dim: ' + imgInfo.dim);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tdim = [];\r\n\t\t\t\t\tdim.push(imgInfo.x, imgInfo.y, imgInfo.w, imgInfo.h);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdim = dim.map((str: string) => {\r\n\t\t\t\t\treturn parseInt(str, 10) * 2;\r\n\t\t\t\t});\r\n\r\n\t\t\t\timages[id] = new gtp.Image(self._masterCanvas, dim[0], dim[1], dim[2], dim[3]);\r\n\t\t\t});\r\n\r\n\t\t\treturn images;\r\n\t\t}\r\n\t}\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * General-purpose utilities for manipulating images in canvases.\r\n\t * @constructor\r\n\t */\r\n\texport class ImageUtils {\r\n\r\n\t\t/**\r\n\t\t * If <code>true</code>, subpixel rendering is allowed; otherwise, x- and\r\n\t\t * y-coordinates are rounded to the nearest integer when rendering images.\r\n\t\t */\r\n\t\tstatic allowSubpixelImageRendering: boolean = false;\r\n\r\n\t\t/**\r\n\t\t * Takes an img/canvas and a scaling factor and returns the scaled image.\r\n\t\t * @method\r\n\t\t */\r\n\t\tstatic resize(img: HTMLImageElement|HTMLCanvasElement, scale: number = 1): HTMLCanvasElement {\r\n\r\n\t\t\t// The original image is drawn into an offscreen canvas of the same size\r\n\t\t\t// and copied, pixel by pixel into another offscreen canvas with the\r\n\t\t\t// new size.\r\n\r\n\t\t\tvar orig: HTMLCanvasElement,\r\n\t\t\t\torigCtx: CanvasRenderingContext2D;\r\n\r\n\t\t\tif (img instanceof HTMLImageElement) {\r\n\t\t\t\torig = gtp.ImageUtils.createCanvas(img.width, img.height);\r\n\t\t\t\torigCtx = orig.getContext('2d');\r\n\t\t\t\torigCtx.drawImage(img, 0, 0);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\torig = <HTMLCanvasElement>img;\r\n\t\t\t\torigCtx = orig.getContext('2d');\r\n\t\t\t}\r\n\r\n\t\t\tif (scale === 1) {\r\n\t\t\t\treturn orig; // No reason to scale\r\n\t\t\t}\r\n\r\n\t\t\tvar origPixels: ImageData = origCtx.getImageData(0, 0, img.width, img.height);\r\n\r\n\t\t\tvar widthScaled: number = img.width * scale;\r\n\t\t\tvar heightScaled: number = img.height * scale;\r\n\t\t\tvar scaled: HTMLCanvasElement = gtp.ImageUtils.createCanvas(widthScaled, heightScaled);\r\n\t\t\tvar scaledCtx: CanvasRenderingContext2D = scaled.getContext('2d');\r\n\t\t\tvar scaledPixels: ImageData = scaledCtx.getImageData(0, 0, widthScaled, heightScaled);\r\n\r\n\t\t\tfor (var y: number = 0; y < heightScaled; y++) {\r\n\t\t\t\tfor (var x: number = 0; x < widthScaled; x++) {\r\n\t\t\t\t\tvar index: number = (Math.floor(y / scale) * img.width + Math.floor(x / scale)) * 4;\r\n\t\t\t\t\tvar indexScaled: number = (y * widthScaled + x) * 4;\r\n\t\t\t\t\tscaledPixels.data[indexScaled] = origPixels.data[index];\r\n\t\t\t\t\tscaledPixels.data[indexScaled + 1] = origPixels.data[index + 1];\r\n\t\t\t\t\tscaledPixels.data[indexScaled + 2] = origPixels.data[index + 2];\r\n\t\t\t\t\tscaledPixels.data[indexScaled + 3] = origPixels.data[index + 3];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tscaledCtx.putImageData(scaledPixels, 0, 0);\r\n\t\t\treturn scaled;\r\n\t\t}\r\n\r\n\t\tstatic createCanvas(width: number, height: number, parentDiv?: HTMLElement|string) {\r\n\r\n\t\t\tconst canvas: HTMLCanvasElement = document.createElement('canvas');\r\n\t\t\tcanvas.width = width;\r\n\t\t\tcanvas.height = height;\r\n\t\t\tgtp.ImageUtils.prepCanvas(canvas);\r\n\r\n\t\t\tif (parentDiv) {\r\n\r\n\t\t\t\tvar actualParent: HTMLElement;\r\n\t\t\t\tif (typeof parentDiv === 'string') {\r\n\t\t\t\t\tactualParent = document.getElementById(parentDiv);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tactualParent = parentDiv;\r\n\t\t\t\t}\r\n\t\t\t\t// Clear previous contents in place there was a placeholder image\r\n\t\t\t\tactualParent.innerHTML = '';\r\n\t\t\t\tactualParent.appendChild(canvas);\r\n\t\t\t}\r\n\r\n\t\t\treturn canvas;\r\n\t\t}\r\n\r\n\t\tstatic prepCanvas(canvas: HTMLCanvasElement) {\r\n\t\t\t// Use \"any\" instead of \"CanvasRenderingContext2D\" since  the TypeScript definition\r\n\t\t\t// files don't like the experimental *imageSmoothingEnabled properties\r\n\t\t\tconst ctx: any = canvas.getContext('2d');\r\n\t\t\tctx.imageSmoothingEnabled = false;\r\n\t\t\tctx.mozImageSmoothingEnabled = false;\r\n\t\t\tctx.oImageSmoothingEnabled = false;\r\n\t\t\tctx.webkitImageSmoothingEnabled = false;\r\n\t\t\tctx.msImageSmoothingEnabled = false;\r\n\r\n\t\t\t/* TODO: set imageRendering CSS properties based on some gtp.Game config property */\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Converts a color of a particular type to completely transparent in a canvas.\r\n\t\t *\r\n\t\t * @param {Canvas} canvas The canvas to operate on.\r\n\t\t * @param {int} x The x-coordinate of the pixel whose color to change.  0 will\r\n\t\t *        be used if this parameter is undefined.\r\n\t\t * @param {int} y The y-coordinate of the pixel whose color to change.  0 will\r\n\t\t *        be used if this parameter is undefined.\r\n\t\t * @return {Canvas} The original canvas, which has been modified.\r\n\t\t * @method\r\n\t\t */\r\n\t\tstatic makeColorTranslucent(canvas: HTMLCanvasElement, x: number = 0, y: number = 0) {\r\n\r\n\t\t\tvar ctx: CanvasRenderingContext2D = canvas.getContext('2d');\r\n\t\t\tvar w: number = canvas.width;\r\n\t\t\tvar h: number = canvas.height;\r\n\t\t\tvar pixels: ImageData = ctx.getImageData(0, 0, w, h);\r\n\r\n\t\t\tvar color: number[] = [];\r\n\t\t\tvar offs: number = (y * w + x) * 4;\r\n\t\t\tfor (var i: number = 0; i < 4; i++) {\r\n\t\t\t\tcolor[i] = pixels.data[offs + i];\r\n\t\t\t}\r\n\r\n\t\t\tfor (y = 0; y < h; y++) {\r\n\t\t\t\tfor (x = 0; x < w; x++) {\r\n\t\t\t\t\tvar index: number = (y * w + x) * 4;\r\n\t\t\t\t\tif (pixels.data[index] === color[0] && pixels.data[index + 1] === color[1] &&\r\n\t\t\t\t\t\tpixels.data[index + 2] === color[2] && pixels.data[index + 3] === color[3]) {\r\n\t\t\t\t\t\tpixels.data[index] = 0;\r\n\t\t\t\t\t\tpixels.data[index + 1] = 0;\r\n\t\t\t\t\t\tpixels.data[index + 2] = 0;\r\n\t\t\t\t\t\tpixels.data[index + 3] = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tctx.putImageData(pixels, 0, 0);\r\n\t\t\treturn canvas;\r\n\t\t}\r\n\t}\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\texport class InputManager {\r\n\r\n\t\tprivate keys: boolean[];\r\n\t\tprivate _refireMillis: number;\r\n\t\tprivate _repeatTimers: { [key: number/*gtp.Keys*/]: any };\r\n\r\n\t\t/**\r\n\t\t * Handles input for games.<p>\r\n\t\t *\r\n\t\t * For keyboards, allows polling of individual key presses, both with and\r\n\t\t * without the keyboard repeat delay.<p>\r\n\t\t *\r\n\t\t * Touch and mouse input are currently not supported.\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param {int} [keyRefireMillis=0] What the key refiring time should be, in\r\n\t\t *        milliseconds.  A value of 0 means to take the operating system\r\n\t\t *        default.\r\n\t\t */\r\n\t\tconstructor(keyRefireMillis?: number) {\r\n\t\t\tthis.keys = [];\r\n\t\t\tthis._refireMillis = keyRefireMillis || 0;\r\n\t\t\tthis._repeatTimers = [];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Resets a specific key to its \"not depressed\" state.\r\n\t\t *\r\n\t\t * @param {int} key The key to reset.\r\n\t\t * @see clearKeyStates\r\n\t\t */\r\n\t\tclearKeyState(key: gtp.Keys) {\r\n\t\t\tthis.keys[key] = false;\r\n\t\t\tif (this._repeatTimers[key]) {\r\n\t\t\t\tclearInterval(this._repeatTimers[key]);\r\n\t\t\t\tthis._repeatTimers[key] = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Resets all keys to be in their \"not depressed\" states.\r\n\t\t */\r\n\t\tclearKeyStates() {\r\n\t\t\tfor (var i: number = 0; i < this.keys.length; i++) {\r\n\t\t\t\tthis.clearKeyState(i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether ctrl is pressed.\r\n\t\t * @param clear {boolean} Whether the key's state should be reset to \"not\r\n\t\t *        pressed\" when this method returns.  This is useful to effectively\r\n\t\t *        enable the keyboard's buffering.\r\n\t\t * @return {boolean} Whether the key was pressed.\r\n\t\t */\r\n\t\tctrl(clear: boolean = false) {\r\n\t\t\treturn this.isKeyDown(gtp.Keys.KEY_CTRL, clear);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether down is pressed.\r\n\t\t * @param clear {boolean} Whether the key's state should be reset to \"not\r\n\t\t *        pressed\" when this method returns.  This is useful to effectively\r\n\t\t *        enable the keyboard's buffering.\r\n\t\t * @return {boolean} Whether the key was pressed.\r\n\t\t */\r\n\t\tdown(clear: boolean = false) {\r\n\t\t\treturn this.isKeyDown(gtp.Keys.KEY_DOWN_ARROW, clear);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether enter is pressed.\r\n\t\t * @param clear {boolean} Whether the key's state should be reset to \"not\r\n\t\t *        pressed\" when this method returns.  This is useful to effectively\r\n\t\t *        enable the keyboard's buffering.\r\n\t\t * @return {boolean} Whether the key was pressed.\r\n\t\t */\r\n\t\tenter(clear: boolean = false) {\r\n\t\t\treturn this.isKeyDown(gtp.Keys.KEY_ENTER, clear);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Installs this keyboard manager.  Should be called during game\r\n\t\t * initialization.\r\n\t\t */\r\n\t\tinstall() {\r\n\t\t\tvar self: InputManager = this;\r\n\t\t\tdocument.onkeydown = function(e: KeyboardEvent) { self._keyDown(e); };\r\n\t\t\tdocument.onkeyup = function(e:  KeyboardEvent) { self._keyUp(e); };\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether a specific key is pressed.\r\n\t\t * @param keyCode {gtp.Keys} A key code.\r\n\t\t * @param clear {boolean} Whether the key's state should be reset to \"not\r\n\t\t *        pressed\" when this method returns.  This is useful to effectively\r\n\t\t *        enable the keyboard's buffering.\r\n\t\t * @return {boolean} Whether the key was pressed.\r\n\t\t */\r\n\t\tisKeyDown(keyCode: number, clear: boolean = false) {\r\n\t\t\tvar down: boolean = this.keys[keyCode];\r\n\t\t\tif (down && clear) {\r\n\t\t\t\tthis.keys[keyCode] = false;\r\n\t\t\t}\r\n\t\t\treturn down;\r\n\t\t}\r\n\r\n\t\t_keyDown(e: KeyboardEvent) {\r\n\t\t\tvar keyCode: number = e.keyCode;\r\n\t\t\tif (keyCode === 32 || (keyCode >= 37 && keyCode <= 40)) { // An arrow key or space\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\tif (this._refireMillis) {\r\n\t\t\t\tif (!this._repeatTimers[keyCode]) { // Only do on actual keydown, not key repeat\r\n\t\t\t\t\tthis.keys[keyCode] = true;\r\n\t\t\t\t\tvar self: InputManager = this;\r\n\t\t\t\t\tthis._repeatTimers[keyCode] = setInterval(function() {\r\n\t\t\t\t\t\t//console.log('--- ' + new Date() + ': Setting keydown to true for: ' + keyCode + ', previous === ' + self.keys[keyCode]);\r\n\t\t\t\t\t\tself.keys[keyCode] = true;\r\n\t\t\t\t\t}, self._refireMillis);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.keys[keyCode] = true;\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\t_keyUp(e: KeyboardEvent) {\r\n\t\t\tvar key: number = e.keyCode;\r\n\t\t\tif (this._refireMillis) {\r\n\t\t\t\tif (this._repeatTimers[key]) { // Should always be true\r\n\t\t\t\t\tthis.keys[key] = false;\r\n\t\t\t\t\tclearInterval(this._repeatTimers[key]);\r\n\t\t\t\t\tthis._repeatTimers[key] = null;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.error('_keyUp: Timer does not exist for key: ' + key + '!');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.keys[key] = false;\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether left is pressed.\r\n\t\t * @param clear {boolean} Whether the key's state should be reset to \"not\r\n\t\t *        pressed\" when this method returns.  This is useful to effectively\r\n\t\t *        enable the keyboard's buffering.\r\n\t\t * @return {boolean} Whether the key was pressed.\r\n\t\t */\r\n\t\tleft(clear: boolean = false) {\r\n\t\t\treturn this.isKeyDown(gtp.Keys.KEY_LEFT_ARROW, clear);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether right is pressed.\r\n\t\t * @param clear {boolean} Whether the key's state should be reset to \"not\r\n\t\t *        pressed\" when this method returns.  This is useful to effectively\r\n\t\t *        enable the keyboard's buffering.\r\n\t\t * @return {boolean} Whether the key was pressed.\r\n\t\t */\r\n\t\tright(clear: boolean = false) {\r\n\t\t\treturn this.isKeyDown(gtp.Keys.KEY_RIGHT_ARROW, clear);\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * Returns whether shift is pressed.\r\n\t\t * @param clear {boolean} Whether the key's state should be reset to \"not\r\n\t\t *        pressed\" when this method returns.  This is useful to effectively\r\n\t\t *        enable the keyboard's buffering.\r\n\t\t * @return {boolean} Whether the key was pressed.\r\n\t\t */\r\n\t\tshift(clear: boolean = false) {\r\n\t\t\treturn this.isKeyDown(gtp.Keys.KEY_SHIFT, clear);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether up is pressed.\r\n\t\t * @param clear {boolean} Whether the key's state should be reset to \"not\r\n\t\t *        pressed\" when this method returns.  This is useful to effectively\r\n\t\t *        enable the keyboard's buffering.\r\n\t\t * @return {boolean} Whether the key was pressed.\r\n\t\t */\r\n\t\tup(clear: boolean = false) {\r\n\t\t\treturn this.isKeyDown(gtp.Keys.KEY_UP_ARROW, clear);\r\n\t\t}\r\n\t}\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\texport enum Keys {\r\n\r\n\t\tKEY_ENTER = 13,\r\n\t\tKEY_SHIFT = 16,\r\n\t\tKEY_CTRL = 17,\r\n\t\tKEY_SPACE = 32,\r\n\t\tKEY_LEFT_ARROW = 37,\r\n\t\tKEY_UP_ARROW = 38,\r\n\t\tKEY_RIGHT_ARROW = 39,\r\n\t\tKEY_DOWN_ARROW = 40,\r\n\t\t\r\n\t\tKEY_0 = 48,\r\n\t\tKEY_1 = 49,\r\n\t\tKEY_2 = 50,\r\n\t\tKEY_3 = 51,\r\n\t\tKEY_4 = 52,\r\n\t\tKEY_5 = 53,\r\n\t\tKEY_6 = 54,\r\n\t\tKEY_7 = 55,\r\n\t\tKEY_8 = 56,\r\n\t\tKEY_9 = 57,\r\n\t\t\r\n\t\tKEY_A = 65,\r\n\t\tKEY_B = 66,\r\n\t\tKEY_C = 67,\r\n\t\tKEY_D = 68,\r\n\t\tKEY_E = 69,\r\n\t\tKEY_F = 70,\r\n\t\tKEY_G = 71,\r\n\t\tKEY_H = 72,\r\n\t\tKEY_I = 73,\r\n\t\tKEY_J = 74,\r\n\t\tKEY_K = 75,\r\n\t\tKEY_L = 76,\r\n\t\tKEY_M = 77,\r\n\t\tKEY_N = 78,\r\n\t\tKEY_O = 79,\r\n\t\tKEY_P = 80,\r\n\t\tKEY_Q = 81,\r\n\t\tKEY_R = 82,\r\n\t\tKEY_S = 83,\r\n\t\tKEY_T = 84,\r\n\t\tKEY_U = 85,\r\n\t\tKEY_V = 86,\r\n\t\tKEY_W = 87,\r\n\t\tKEY_X = 88,\r\n\t\tKEY_Y = 89,\r\n\t\tKEY_Z = 90\r\n\t\t\r\n\t}\r\n}","module gtp {\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * A simple x-y coordinate.\r\n\t */\r\n\texport class Point {\r\n\r\n\t\tx: number;\r\n\t\ty: number;\r\n\r\n\t\t/**\r\n\t\t * Creates a <code>Point</code> instance.\r\n\t\t * @param {number} x The x-coordinate, or <code>0</code> if unspecified.\r\n\t\t * @param {number} y The y-coordinate, or <code>0</code> if unspecified.\r\n\t\t */\r\n\t\tconstructor(x: number = 0, y: number = 0) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether this point is equal to another one.\r\n\t\t * @param {Point} other The point to compare to, which may be\r\n\t\t *        <code>null</code>.\r\n\t\t * @return Whether the two points are equal.\r\n\t\t */\r\n\t\tequals(other: Point): boolean {\r\n\t\t\treturn other != null && this.x === other.x && this.y === other.y;\r\n\t\t}\r\n\t}\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * An object pool.\tUseful if your game creates lots of very small\r\n\t * objects of the same type each frame, such as a path-finding algorithm.\r\n\t * <p>\r\n\t * NOTE: The <code>returnObj()</code> method may take linear time;\r\n\t * it's much more efficient to use <code>reset()</code> if possible.\r\n\t */\r\n\texport class Pool<T> {\r\n\r\n\t\tprivate _pool: T[];\r\n\t\tprivate _index: number;\r\n\t\tprivate _growCount: number;\r\n\t\tprivate _c: { new(): T };\r\n\r\n\t\t/**\r\n\t\t * Creates an object pool.\r\n\t\t * @param {Function} ctorFunc The constructor function for <code>T</code>\r\n\t\t *        instances.\r\n\t\t * @param {number} initialSize The initial size of the pool; defaults to\r\n\t\t *        <code>20</code>.\r\n\t\t * @param {number} growCount The amount to grow this pool by if too many\r\n\t\t *        objects are borrowed; defaults to <code>10</code>.\r\n\t\t */\r\n\t\tconstructor(ctorFunc: { new(): T }, initialSize: number = 20,\r\n\t\t\t\t\tgrowCount: number = 10) {\r\n\t\t\tthis._c = ctorFunc;\r\n\t\t\tthis._pool = [];\r\n\t\t\tfor (let i: number = 0; i < initialSize; i++) {\r\n\t\t\t\tthis._pool.push(new this._c());\r\n\t\t\t}\r\n\t\t\tthis._index = 0;\r\n\t\t\tthis._growCount = growCount;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Gets an object from this pool.\r\n\t\t * @return {T} An object from this pool.\r\n\t\t * @see returnObj\r\n\t\t * @see returnObj\r\n\t\t */\r\n\t\tborrowObj(): T {\r\n\t\t\tlet obj: T = this._pool[this._index++];\r\n\t\t\tif (this._index >= this._pool.length) {\r\n\t\t\t\tfor (let i: number = 0; i < this._growCount; i++) {\r\n\t\t\t\t\tthis._pool.push(new this._c());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the number of currently-borrowed objects.\r\n\t\t * @return {number} The number of currently-borrowed objects.\r\n\t\t */\r\n\t\tget borrowedCount(): number {\r\n\t\t\treturn this._index;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Acts as if all objects have been returned to this pool.\tThis method\r\n\t\t * should be used if you're implementing an algorithm that uses an\r\n\t\t * arbitrary number of objects, and just want to return them all when you\r\n\t\t * are done.\r\n\t\t * @see returnObj\r\n\t\t */\r\n\t\treset() {\r\n\t\t\tthis._index = 0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns an object to this pool.\r\n\t\t * @param {T} obj The object to return.\r\n\t\t * @return {boolean} <code>true</code>, assuming the object was actually\r\n\t\t *         from this pool, and not previously returned.\tIn other words,\r\n\t\t *         this method will only return <code>false</code> if you try to\r\n\t\t *         incorrectly return an object.\r\n\t\t * @see borrowObj\r\n\t\t * @see reset\r\n\t\t */\r\n\t\treturnObj(obj: T): boolean {\r\n\r\n\t\t\t// Get the index of the object being returned.\r\n\t\t\tlet objIndex: number = -1;\r\n\t\t\tfor (let i: number = 0; i < this._index; i++) {\r\n\t\t\t\tif (obj === this._pool[i]) {\r\n\t\t\t\t\tobjIndex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (objIndex === -1) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Swap it with the most-recently borrowed object and move our index back\r\n\t\t\tlet temp: T = this._pool[--this._index];\r\n\t\t\tthis._pool[this._index] = this._pool[objIndex];\r\n\t\t\tthis._pool[objIndex] = temp;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the total number of pooled objects, borrowed or otherwise.\r\n\t\t * Only really useful for debugging purposes.\r\n\t\t * @return {number} The total number of objects in this pool.\r\n\t\t */\r\n\t\tget length(): number {\r\n\t\t\treturn this._pool.length;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns this object as a string.\tUseful for debugging.\r\n\t\t * @return {string} A string representation of this pool.\r\n\t\t */\r\n\t\ttoString(): string {\r\n\t\t\treturn '[gtp.Pool: ' +\r\n\t\t\t\t\t'borrowed=' + this.borrowedCount +\r\n\t\t\t\t\t', size=' + this.length +\r\n\t\t\t\t\t']';\r\n\t\t}\r\n\t}\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\texport class Rectangle {\r\n\r\n\t\tx: number;\r\n\t\ty: number;\r\n\t\tw: number;\r\n\t\th: number;\r\n\r\n\t\t/**\r\n\t\t * A simple rectangle class, containing some useful utility methods.\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param {int} x The x-coordinate, defaulting to <code>0</code>.\r\n\t\t * @param {int} y The y-coordinate, defaulting to <code>0</code>.\r\n\t\t * @param {int} w The width of the rectangle, defaulting to <code>0</code>.\r\n\t\t * @param {int} h The height of the rectangle, defaulting to <code>0</code>.\r\n\t\t */\r\n\t\tconstructor(x: number = 0, y: number = 0, w: number = 0, h: number = 0) {\r\n\t\t\tthis.set(x, y, w, h);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether one rectangle contains another.\r\n\t\t *\r\n\t\t * @param {number|Rectangle} x2 Either a second rectangle, or the\r\n\t\t *        x-coordinate of the second rectangle.\r\n\t\t * @param {number} y2 The y-coordinate of the second rectangle, if\r\n\t\t *        specifying the dimensions as separate arguments.\r\n\t\t * @param {number} w2 The width of the second rectangle, if\r\n\t\t *        specifying the dimensions as separate arguments.\r\n\t\t * @param {number} h2 The height of the second rectangle, if\r\n\t\t *        specifying the dimensions as separate arguments.\r\n\t\t * @return Whether this rectangle contains the specified rectangle.\r\n\t\t */\r\n\t\tcontainsRect(x2: number|Rectangle, y2: number = 0, w2: number = 0, h2: number = 0) {\r\n\r\n\t\t\tif (x2 instanceof Rectangle) {\r\n\t\t\t\tconst r: Rectangle = <Rectangle>x2;\r\n\t\t\t\ty2 = r.y;\r\n\t\t\t\tw2 = r.w;\r\n\t\t\t\th2 = r.h;\r\n\t\t\t\tx2 = r.x;\r\n\t\t\t}\r\n\r\n\t\t\tvar w: number = this.w;\r\n\t\t\tvar h: number = this.h;\r\n\t\t\tif ((w | h | w2 | h2) < 0) {\r\n\t\t\t\t\t// At least one of the dimensions is negative...\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// Note: if any dimension is zero, tests below must return false...\r\n\t\t\tvar x: number = this.x;\r\n\t\t\tvar y: number = this.y;\r\n\t\t\tif (x2 < x || y2 < y) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tw += x;\r\n\t\t\tw2 += <number>x2;\r\n\t\t\tif (w2 <= x2) {\r\n\t\t\t\t\t// X+W overflowed or W was zero, return false if...\r\n\t\t\t\t\t// either original w or W was zero or\r\n\t\t\t\t\t// x+w did not overflow or\r\n\t\t\t\t\t// the overflowed x+w is smaller than the overflowed X+W\r\n\t\t\t\t\tif (w >= x || w2 > w) { return false; }\r\n\t\t\t} else {\r\n\t\t\t\t\t// X+W did not overflow and W was not zero, return false if...\r\n\t\t\t\t\t// original w was zero or\r\n\t\t\t\t\t// x+w did not overflow and x+w is smaller than X+W\r\n\t\t\t\t\tif (w >= x && w2 > w) { return false; }\r\n\t\t\t}\r\n\t\t\th += y;\r\n\t\t\th2 += y2;\r\n\t\t\tif (h2 <= y2) {\r\n\t\t\t\t\tif (h >= y || h2 > h) { return false; }\r\n\t\t\t} else {\r\n\t\t\t\t\tif (h >= y && h2 > h) { return false; }\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns whether this rectangle intersects another.\r\n\t\t *\r\n\t\t * @param {gtp.Rectangle} rect2 Another rectangle to compare against.\r\n\t\t *        This should not be null.\r\n\t\t * @return {boolean} Whether the two rectangles intersect.\r\n\t\t */\r\n\t\tintersects(rect2: gtp.Rectangle): boolean {\r\n\r\n\t\t\tvar tw: number = this.w;\r\n\t\t\tvar th: number = this.h;\r\n\t\t\tvar rw: number = rect2.w;\r\n\t\t\tvar rh: number = rect2.h;\r\n\t\t\tif (rw <= 0 || rh <= 0 || tw <= 0 || th <= 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar tx: number = this.x;\r\n\t\t\tvar ty: number = this.y;\r\n\t\t\tvar rx: number = rect2.x;\r\n\t\t\tvar ry: number = rect2.y;\r\n\t\t\trw += rx;\r\n\t\t\trh += ry;\r\n\t\t\ttw += tx;\r\n\t\t\tth += ty;\r\n\t\t\t//      overflow || intersect\r\n\t\t\treturn ((rw < rx || rw > tx) &&\r\n\t\t\t\t(rh < ry || rh > ty) &&\r\n\t\t\t\t(tw < tx || tw > rx) &&\r\n\t\t\t\t(th < ty || th > ry));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Sets the bounds of this rectangle.\r\n\t\t * @param {number} x The new x-coordinate.\r\n\t\t * @param {number} y The new y-coordinate.\r\n\t\t * @param {number} w The new width.\r\n\t\t * @param {number} h The new height.\r\n\t\t */\r\n\t\tset(x: number, y: number, w: number, h: number) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t\tthis.w = w;\r\n\t\t\tthis.h = h;\r\n\t\t}\r\n\t}\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\texport class Sound {\r\n\r\n\t\tprivate _id: string;\r\n\t\tprivate _buffer: any;\r\n\t\tprivate _loopsByDefault: boolean;\r\n\t\tprivate _loopStart: number;\r\n\r\n\t\tconstructor(id: string, buffer: any, loopStart: number = 0) {\r\n\t\t\tthis._id = id;\r\n\t\t\tthis._buffer = buffer;\r\n\t\t\tthis._loopsByDefault = true;\r\n\t\t\tthis._loopStart = loopStart;\r\n\t\t}\r\n\r\n\t\tgetBuffer(): any {\r\n\t\t\treturn this._buffer;\r\n\t\t}\r\n\r\n\t\tgetId(): string {\r\n\t\t\treturn this._id;\r\n\t\t}\r\n\r\n\t\tgetLoopsByDefaultIfMusic(): boolean {\r\n\t\t\treturn this._loopsByDefault;\r\n\t\t}\r\n\r\n\t\tsetLoopsByDefaultIfMusic(loopsByDefault: boolean) {\r\n\t\t\tthis._loopsByDefault = loopsByDefault;\r\n\t\t}\r\n\r\n\t\tgetLoopStart(): number {\r\n\t\t\treturn this._loopStart;\r\n\t\t}\r\n\r\n\t\tsetLoopStart(loopStart: number) {\r\n\t\t\tthis._loopStart = loopStart;\r\n\t\t}\r\n\t}\r\n}","module gtp {\r\n\t'use strict';\r\n\r\n\texport class SpriteSheet {\r\n\r\n\t\tgtpImage: gtp.Image;\r\n\t\tcellW: number;\r\n\t\tcellH: number;\r\n\t\tspacingX: number;\r\n\t\tspacingY: number;\r\n\t\trowCount: number;\r\n\t\tcolCount: number;\r\n\t\tsize: number;\r\n\r\n\t\t/**\r\n\t\t * Creates a sprite sheet.\r\n\t\t * \r\n\t\t * @param {gtp.Image} gtpImage A GTP image that is the source for the sprite sheet.\r\n\t\t * @param {int} cellW The width of a cell in the sprite sheet.\r\n\t\t * @param {int} cellH The height of a cell in the sprite sheet.\r\n\t\t * @param {int} [spacing=1] Optional empty space between cells.\r\n\t\t * @param {int} [spacingY=spacing] Optional vertical empty space between cells.\r\n\t\t *        Specify only if different than the horizontal spacing.\r\n\t\t * @constructor\r\n\t\t */\r\n\t\tconstructor(gtpImage: gtp.Image, cellW: number, cellH: number,\r\n\t\t\tspacing: number = 1, spacingY: number = spacing) {\r\n\r\n\t\t\tthis.gtpImage = gtpImage;\r\n\t\t\tthis.cellW = cellW;\r\n\t\t\tthis.cellH = cellH;\r\n\t\t\tthis.spacingX = typeof spacing === 'undefined' ? 1 : spacing;\r\n\t\t\tthis.spacingY = typeof spacingY === 'undefined' ? this.spacingX : spacingY;\r\n\r\n\t\t\tthis.rowCount = Math.floor(gtpImage.height / (cellH + this.spacingY));\r\n\t\t\tif ((gtpImage.height - this.rowCount * (cellH + this.spacingY)) >= cellH) {\r\n\t\t\t\tthis.rowCount++;\r\n\t\t\t}\r\n\t\t\tthis.colCount = Math.floor(gtpImage.width / (cellW + this.spacingX));\r\n\t\t\tif ((gtpImage.width - this.colCount * (cellW + this.spacingX)) >= cellW) {\r\n\t\t\t\tthis.colCount++;\r\n\t\t\t}\r\n\r\n\t\t\tthis.size = this.rowCount * this.colCount;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Draws a sprite in this sprite sheet by row and column.\r\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas' context.\r\n\t\t * @param {int} x The x-coordinate at which to draw.\r\n\t\t * @param {int} y The y-coordinate at which to draw.\r\n\t\t * @param {int} row The row in the sprite sheet of the sprite to draw.\r\n\t\t * @param {int} col The column in the sprite sheet of the sprite to draw.\r\n\t\t */\r\n\t\tdrawSprite(ctx: CanvasRenderingContext2D, x: number, y: number, row: number, col: number) {\r\n\t\t\tvar cellW: number = this.cellW;\r\n\t\t\tvar cellH: number = this.cellH;\r\n\t\t\tvar srcX: number = (cellW + this.spacingX) * col; //(col-1);\r\n\t\t\tvar srcY: number = (cellH + this.spacingY) * row; //(row-1);\r\n\t\t\t//ctx.drawImage(this.gtpImage.canvas, srcX,srcY,cellW,cellH, x,y,cellW,cellH);\r\n\t\t\tthis.gtpImage.drawScaled2(ctx, srcX, srcY, cellW, cellH, x, y, cellW, cellH);\r\n\t\t}\r\n   \r\n\t\t/**\r\n\t\t * Draws a sprite in this sprite sheet by index\r\n\t\t * (<code>row*colCount + col</code>).\r\n\t\t * @param {CanvasRenderingContext2D} ctx The canvas' context.\r\n\t\t * @param {int} x The x-coordinate at which to draw.\r\n\t\t * @param {int} y The y-coordinate at which to draw.\r\n\t\t * @param {int} index The index in the sprite sheet of the sprite to draw.\r\n\t\t */\r\n\t\tdrawByIndex(ctx: CanvasRenderingContext2D, x: number, y: number, index: number) {\r\n\t\t\tvar row: number = Math.floor(index / this.colCount);\r\n\t\t\tvar col: number = Math.floor(index % this.colCount);\r\n\t\t\tthis.drawSprite(ctx, x, y, row, col);\r\n\t\t}\r\n\r\n\t}\r\n}","module gtp {\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * Arguments to pass to a state's constructor.\r\n\t */\r\n\texport interface BaseStateArgs {\r\n\t\tgame: gtp.Game;\r\n\t}\r\n\r\n\t/**\r\n\t * A base class for game states.  Basically just an interface with callbacks\r\n\t * for updating and rendering, along with other lifecycle-ish methods.\r\n\t * @class\r\n\t */\r\n\texport class State {\r\n\r\n\t\tgame: gtp.Game;\r\n\r\n\t\t/**\r\n\t\t * A base class for game states.  Basically just an interface with callbacks\r\n\t\t * for updating and rendering, along with other lifecycle-ish methods.\r\n\t\t * @class\r\n\t\t * @constructor\r\n\t\t * @param args Arguments to the game state.\r\n\t\t */\r\n\t\tconstructor(args?: Game|BaseStateArgs) {\r\n\t\t\tif (args instanceof Game) {\r\n\t\t\t\tthis.game = args;\r\n\t\t\t}\r\n\t\t\telse if (args) {\r\n\t\t\t\tthis.game = (<BaseStateArgs>args).game;\r\n\t\t\t}\r\n\t\t\telse { // Default to global game object\r\n\t\t\t\tthis.game = window.game;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Called right before a state starts.  Subclasses can do any needed\r\n\t\t * initialization here.\r\n\t\t * @param {Game} game The game being played.\r\n\t\t * @see leaving\r\n\t\t */\r\n\t\tenter(game: Game) {\r\n\t\t\t// Subclasses can override\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Called when this state is being left for another one.\r\n\t\t * @param {Game} game The game being played.\r\n\t\t * @see enter\r\n\t\t */\r\n\t\tleaving(game: Game) {\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Subclasses should override this method to do necessary update logic.\r\n\t\t *\r\n\t\t * @param {float} delta The amount of time that has elapsed since the last\r\n\t\t *        frame/call to this method.\r\n\t\t */\r\n\t\tupdate(delta: number) {\r\n\t\t\t// Subclasses should override\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Subclasses should override this method to render the screen.\r\n\t\t *\r\n\t\t * @param {CanvasRenderingContext2D} ctx The graphics context to render onto.\r\n\t\t */\r\n\t\trender(ctx: CanvasRenderingContext2D) {\r\n\t\t\t// Subclasses should override\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * A mapping from string keys to numbers.  Used to map named events to their\r\n\t * run times.\r\n\t */\r\n\tinterface TimeMap {\r\n\t\t[key: string]: number;\r\n\t}\r\n\r\n\texport class Timer {\r\n\r\n\t\tprivate _startTimes: TimeMap = {};\r\n\t\tprivate _prefix: string = 'DEBUG';\r\n\r\n\t\t/**\r\n\t\t * Allows you to time actions and log their runtimes to the console.\r\n\t\t * @constructor\r\n\t\t */\r\n\t\tconstructor() {\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Sets the prefix to prepend to each line printed to the console.\r\n\t\t *\r\n\t\t * @param {String} prefix The new prefix.  'DEBUG' is used if not defined.\r\n\t\t */\r\n\t\tsetLogPrefix(prefix: string = 'DEBUG') {\r\n\t\t\tthis._prefix = prefix;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Starts timing something.\r\n\t\t *\r\n\t\t * @param {String} key A unique key for the thing being timed.\r\n\t\t */\r\n\t\tstart(key: string) {\r\n\t\t\tthis._startTimes[key] = Utils.timestamp();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Stops timing something.\r\n\t\t *\r\n\t\t * @param {String} key The key of the thing being timed.\r\n\t\t */\r\n\t\tend(key: string) {\r\n\t\t\tvar start: number = this._startTimes[key];\r\n\t\t\tif (!start) {\r\n\t\t\t\tconsole.error('Cannot end timer for \"' + key + '\" as it was never started');\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tvar time: number = Utils.timestamp() - start;\r\n\t\t\tdelete this._startTimes[key];\r\n\t\t\treturn time;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Stops timing something and logs its runtime to the console.\r\n\t\t * \r\n\t\t * @param {String} key The key of the thing being timed.\r\n\t\t */\r\n\t\tendAndLog(key: string) {\r\n\t\t\tvar time: number = this.end(key);\r\n\t\t\tif (time > -1) {\r\n\t\t\t\tconsole.log(this._prefix + ': ' + key + ': ' + time + ' ms');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t}\r\n}\r\n","module gtp {\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * Obligatory utility methods for games.\r\n\t * @constructor\r\n\t */\r\n\texport class Utils {\r\n\r\n\t\t/**\r\n\t\t * Returns the number of elements in an object.\r\n\t\t *\r\n\t\t * @param {object} obj The object.\r\n\t\t * @return {int} The number of elements in the object.\r\n\t\t */\r\n\t\tstatic getObjectSize(obj: Object): number {\r\n\t\t\tvar size: number = 0;\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (obj.hasOwnProperty(key)) {\r\n\t\t\t\t\tsize++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn size;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the value of a request parameter.\r\n\t\t *\r\n\t\t * @param {string} param The name of the request parameter.\r\n\t\t * @return {string} The value of the request parameter, or <code>null</code>\r\n\t\t *         if it was not specified.\r\n\t\t */\r\n\t\tstatic getRequestParam(param: string): string {\r\n\r\n\t\t\t// Replace leading '?' with '&'\r\n\t\t\tvar params: string = '&' + gtp.BrowserUtil.getWindowLocationSearch().substring(1);\r\n\r\n\t\t\tvar searchFor: string = '&' + param;\r\n\t\t\tvar index: number = params.indexOf(searchFor);\r\n\t\t\tif (index >= -1) {\r\n\t\t\t\tvar start: number = index + searchFor.length;\r\n\t\t\t\tif (params.charAt(start) === '=') {\r\n\t\t\t\t\tstart++;\r\n\t\t\t\t\tvar end: number = params.indexOf('&', start); // &foo=val1&bar=val2\r\n\t\t\t\t\tif (end === -1) {\r\n\t\t\t\t\t\tend = params.length; // &foo=val1\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn params.substring(start, end);\r\n\t\t\t\t}\r\n\t\t\t\telse if (params.charAt(start) === '&') {\r\n\t\t\t\t\treturn ''; // &foo&bar\r\n\t\t\t\t}\r\n\t\t\t\telse if (start === params.length) {\r\n\t\t\t\t\treturn ''; // &foo\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Equivlaent to dojo/_base/hitch, returns a function in a specific scope.\r\n\t\t *\r\n\t\t * @param {object} scope The scope to run the function in (e.g. the value of\r\n\t\t *        \"this\").\r\n\t\t * @param {function} func The function.\r\n\t\t * @return {function} A function that does the same thing as 'func', but in the\r\n\t\t *         specified scope.\r\n\t\t */\r\n\t\tstatic hitch(scope: any, func: Function): Function {\r\n\t\t\treturn function() {\r\n\t\t\t\tfunc.apply(scope, arguments);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Adds the properties of one element into another.\r\n\t\t *\r\n\t\t * @param {object} source The object with properties to mix into another object.\r\n\t\t * @param {object} target The object that will receive the new properties.\r\n\t\t */\r\n\t\tstatic mixin(source: any, target: any) {\r\n\t\t\tfor (var prop in source) {\r\n\t\t\t\tif (source.hasOwnProperty(prop)) {\r\n\t\t\t\t\t//if (!target[prop]) {\r\n\t\t\t\t\ttarget[prop] = source[prop];\r\n\t\t\t\t\t//}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns a random integer between min (inclusive) and max (exclusive).  If\r\n\t\t * max is omitted, the single parameter is treated as the maximum value, and\r\n\t\t * an integer is returned in the range 0 - value.\r\n\t\t *\r\n\t\t * @param {int} [min=0] The minimum possible value, inclusive.\r\n\t\t * @param {int} max The maximum possible value, exclusive.\r\n\t\t * @return {int} The random integer value.\r\n\t\t */\r\n\t\tstatic randomInt(min: number, max: number): number;\r\n\t\tstatic randomInt(max: number): number;\r\n\t\tstatic randomInt(min: number, max?: number): number {\r\n\t\t\tvar realMin: number, realMax: number;\r\n\t\t\tif (typeof max === 'undefined') {\r\n\t\t\t\trealMin = 0;\r\n\t\t\t\trealMax = min;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\trealMin = min;\r\n\t\t\t\trealMax = max;\r\n\t\t\t}\r\n\t\t\t// Using Math.round() will give you a non-uniform distribution!\r\n\t\t\treturn Math.floor(Math.random() * (realMax - realMin)) + realMin;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns a time in milliseconds.  This will be high resolution, if\r\n\t\t * possible.  This method should be used to implement constructs like\r\n\t\t * delays.\r\n\t\t * @return {number} A time, in milliseconds.\r\n\t\t */\r\n\t\tstatic timestamp(): number {\r\n\t\t\tif (window.performance && window.performance.now) {\r\n\t\t\t\treturn window.performance.now();\r\n\t\t\t}\r\n\t\t\treturn Date.now(); // IE < 10, PhantomJS 1.x, which is used by unit tests\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Defines console functions for IE9 and other braindead browsers.\r\n\t\t */\r\n\t\tstatic initConsole() {\r\n\t\t\t'use strict';\r\n\t\t\tif (!window.console) {\r\n\t\t\t\tvar noOp: Function = function() {};\r\n\t\t\t\twindow.console = <any>{\r\n\t\t\t\t\tinfo: noOp,\r\n\t\t\t\t\tlog: noOp,\r\n\t\t\t\t\twarn: noOp,\r\n\t\t\t\t\t'error': noOp\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","module gtp {\n\t'use strict';\n\n\t/**\n\t * This class keeps track of game time.  That includes both total running\n\t * time, and \"active time\" (time not spent on paused screens, etc.).\n\t * @constructor\n\t */\n\texport class _GameTimer {\n\n\t\tprivate _startShift: number;\n\t\tprivate _paused: boolean;\n\t\tprivate _pauseStart: number;\n\t\tprivate _updating: boolean;\n\t\tprivate _notUpdatingStart: number;\n\n\t\tconstructor() {\n\t\t\tthis._paused = false;\n\t\t\tthis._pauseStart = 0;\n\t\t\tthis._updating = true;\n\t\t\tthis._notUpdatingStart = 0;\n\t\t}\n\n\t\t/**\n\t\t * Returns whether this game is paused.\n\t\t * @return {boolean} Whether this game is paused.\n\t\t */\n\t\tget paused(): boolean {\n\t\t\treturn this._paused;\n\t\t}\n\n\t\t/**\n\t\t * Returns the length of time the game has been played so far.  This is\n\t\t * \"playable time;\" that is, time in which the user is playing, and the\n\t\t * game is not paused or in a \"not updating\" state (such as the main\n\t\t * frame not having focus).\n\t\t *\n\t\t * @return {number} The amount of time the game has been played, in\n\t\t *         milliseconds.\n\t\t * @see resetPlayTime\n\t\t */\n\t\tget playTime(): number {\n\t\t\tif (this._pauseStart !== 0) {\n\t\t\t\treturn this._pauseStart - this._startShift;\n\t\t\t}\n\t\t\telse if (this._notUpdatingStart !== 0) {\n\t\t\t\treturn this._notUpdatingStart - this._startShift;\n\t\t\t}\n\t\t\treturn Utils.timestamp() - this._startShift;\n\t\t}\n\n\t\t/**\n\t\t * Returns whether this game is updating itself each frame.\n\t\t *\n\t\t * @return {boolean} Whether this game is updating itself.\n\t\t */\n\t\tget updating(): boolean {\n\t\t\treturn this._updating;\n\t\t}\n\n\t\t/**\n\t\t * Resets the \"playtime in milliseconds\" timer back to <code>0</code>.\n\t\t *\n\t\t * @see playTime\n\t\t */\n\t\tresetPlayTime() {\n\t\t\tif (this.paused || !this.updating) {\n\t\t\t\tthrow 'Cannot reset playtime millis when paused or not updating';\n\t\t\t}\n\t\t\tthis._startShift = Utils.timestamp();\n\t\t}\n\n\t\t/**\n\t\t * Sets whether the game is paused.  The game is still told to handle\n\t\t * input, update itself and render.  This is simply a flag that should\n\t\t * be set whenever a \"pause\" screen is displayed.  It stops the \"in-game\n\t\t * timer\" until the game is unpaused.\n\t\t *\n\t\t * @param paused Whether the game should be paused.\n\t\t * @see setUpdating\n\t\t */\n\t\tset paused(paused: boolean) {\n\t\t\t// Cannot pause while !updating, so this is okay\n\t\t\tif (this._paused !== paused) {\n\t\t\t\tthis._paused = paused;\n\t\t\t\tif (paused) {\n\t\t\t\t\tthis._pauseStart = Utils.timestamp();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar pauseTime: number = Utils.timestamp() - this._pauseStart;\n\t\t\t\t\tthis._startShift += pauseTime;\n\t\t\t\t\tthis._pauseStart = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Sets whether the game should be \"updating\" itself.  If a game is not\n\t\t * \"updating\" itself, then it is effectively \"paused,\" and will not accept\n\t\t * any input from the user.<p>\n\t\t *\n\t\t * This method can be used to temporarily \"pause\" a game when the game\n\t\t * window loses focus, for example.\n\t\t *\n\t\t * @param updating {boolean} Whether the game should be updating itself.\n\t\t */\n\t\tset updating(updating: boolean) {\n\t\t\tif (this._updating !== updating) {\n\t\t\t\tthis._updating = updating;\n\t\t\t\tif (!this.paused) { // \"pause\" state \"encompasses\" update state.\n\t\t\t\t\tif (!this._updating) {\n\t\t\t\t\t\tthis._notUpdatingStart = Utils.timestamp();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar notUpdatingTime: number = Utils.timestamp() - this._notUpdatingStart;\n\t\t\t\t\t\tthis._startShift += notUpdatingTime;\n\t\t\t\t\t\tthis._notUpdatingStart = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Resets this timer.  This should be called when a new game is started.\n\t\t */\n\t\tstart() {\n\t\t\tthis._startShift = Utils.timestamp();\n\t\t}\n\n\t}\n}\n","module tiled {\r\n\t'use strict';\r\n\r\n\texport class TiledLayer {\r\n\r\n\t\tmap: any;\r\n\t\tname: string;\r\n\t\twidth: number;\r\n\t\theight: number;\r\n\t\tdata: number[];\r\n\t\topacity: number;\r\n\t\tvisible: boolean;\r\n\t\ttype: string;\r\n\t\tx: number;\r\n\t\ty: number;\r\n\t\tobjects: TiledObject[];\r\n\t\tobjectsByName: { [name: string]: TiledObject };\r\n\r\n\t\tconstructor(map: any, data: any) {\r\n\t\t\tthis.map = map;\r\n\t\t\tthis.name = data.name;\r\n\t\t\tthis.width = data.width;\r\n\t\t\tthis.height = data.height;\r\n\t\t\tthis.data = data.data;\r\n\t\t\tthis.opacity = data.opacity;\r\n\t\t\tthis.visible = data.visible;\r\n\t\t\tthis.type = data.type;\r\n\t\t\tthis.x = data.x;\r\n\t\t\tthis.y = data.y;\r\n\t\t\tthis._setObjects(data.objects);\r\n\t\t}\r\n\r\n\t\tgetData(row: number, col: number): number {\r\n\t\t\tif (!this.data) { // An object layer\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tvar index: number = this._getIndex(row, col);\r\n\t\t\treturn this.data[index];\r\n\t\t}\r\n   \r\n\t\tsetData(row: number, col: number, value: number) {\r\n\t\t\tif (!this.data) { // An object layer\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar index: number = this._getIndex(row, col);\r\n\t\t\tthis.data[index] = value;\r\n\t\t}\r\n   \r\n\t\tprivate _getIndex(row: number, col: number): number {\r\n\t\t\treturn row * this.map.colCount + col;\r\n\t\t}\r\n   \r\n\t\tgetObjectByName(name: string): TiledObject {\r\n\t\t\treturn this.objectsByName ? this.objectsByName[name] : null;\r\n\t\t}\r\n   \r\n\t\tgetObjectIntersecting(x: number, y: number, w: number, h: number): TiledObject {\r\n\t\t\tif (this.objects) {\r\n\t\t\t\tfor (var i: number = 0; i < this.objects.length; i++) {\r\n\t\t\t\t\tvar obj: TiledObject = this.objects[i];\r\n\t\t\t\t\tif (obj.intersects(x, y, w, h)) {\r\n\t\t\t\t\t\treturn obj;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n   \r\n\t\tisObjectGroup(): boolean {\r\n\t\t\treturn this.type === 'objectgroup';\r\n\t\t}\r\n   \r\n\t\tprivate _setObjects(objects: any) {\r\n\t\t\t'use strict';\r\n\t\t\tif (objects) {\r\n\t\t\t\tthis.objects = [];\r\n\t\t\t\tthis.objectsByName = {};\r\n\t\t\t\tfor (var i: number = 0; i < objects.length; i++) {\r\n\t\t\t\t\tvar obj: TiledObject = new tiled.TiledObject(objects[i]);\r\n\t\t\t\t\tthis.objects.push(obj);\r\n\t\t\t\t\tthis.objectsByName[objects[i].name] = obj;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}","module tiled {\r\n\t'use strict';\r\n\r\n\texport class TiledMap {\r\n\r\n\t\trowCount: number;\r\n\t\tcolCount: number;\r\n\t\ttileWidth: number;\r\n\t\ttileHeight: number;\r\n\t\tscreenWidth: number;\r\n\t\tscreenHeight: number;\r\n\t\tscreenRows: number;\r\n\t\tscreenCols: number;\r\n\t\timagePathModifier: Function;\r\n\t\tlayers: TiledLayer[];\r\n\t\tlayersByName: { [name: string]: TiledLayer };\r\n\t\tobjectGroups: TiledLayer[];\r\n\t\ttilesets: TiledTileset[];\r\n\t\tproperties: any;\r\n\t\tversion: number;\r\n\t\torientation: string;\r\n\r\n\t\t/**\r\n\t\t * A 2d game map, generated in Tiled.\r\n\t\t * \r\n\t\t * @constructor\r\n\t\t */\r\n\t\tconstructor(data: any, args: any) {\r\n\r\n\t\t\tthis.rowCount = data.height;\r\n\t\t\tthis.colCount = data.width;\r\n\t\t\tthis.tileWidth = args.tileWidth;\r\n\t\t\tthis.tileHeight = args.tileHeight;\r\n\t\t\tthis.screenWidth = args.screenWidth;\r\n\t\t\tthis.screenHeight = args.screenHeight;\r\n\t\t\tthis.screenRows = Math.ceil(this.screenHeight / this.tileHeight);\r\n\t\t\tthis.screenCols = Math.ceil(this.screenWidth / this.tileWidth);\r\n\t\t\tlet imagePathModifier: Function = args ? args.imagePathModifier : null;\r\n\r\n\t\t\tthis.layers = [];\r\n\t\t\tthis.layersByName = {};\r\n\t\t\tthis.objectGroups = [];\r\n\t\t\tfor (var i: number = 0; i < data.layers.length; i++) {\r\n\t\t\t\tthis.addLayer(data.layers[i]);\r\n\t\t\t}\r\n\r\n\t\t\tthis.tilesets = [];\r\n\t\t\tif (data.tilesets && data.tilesets.length) {\r\n\t\t\t\tfor (i = 0; i < data.tilesets.length; i++) {\r\n\t\t\t\t\tthis.tilesets.push(new tiled.TiledTileset(data.tilesets[i], imagePathModifier));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.properties = data.properties;\r\n\t\t\tthis.version = data.version;\r\n\t\t\tthis.orientation = data.orientation;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Adds a layer to this map.  This method is called internally by the library\r\n\t\t * and the programmer typically does not need to call it.\r\n\t\t * \r\n\t\t * @param {object} layerData The raw layer data.\r\n\t\t * @method\r\n\t\t */\r\n\t\taddLayer(layerData: any) {\r\n\t\t\tvar layer: TiledLayer = new tiled.TiledLayer(this, layerData);\r\n\t\t\tthis.layers.push(layer);\r\n\t\t\tthis.layersByName[layer.name] = layer;\r\n\t\t\tif (layer.isObjectGroup()) {\r\n\t\t\t\tthis.objectGroups.push(layer);\r\n\t\t\t}\r\n\t\t}\r\n   \r\n\t\tdraw(ctx: CanvasRenderingContext2D, centerRow: number, centerCol: number,\r\n\t\t\t\tdx: number = 0, dy: number = 0) {\r\n\r\n\t\t\tvar colCount: number = this.colCount;\r\n\t\t\tvar rowCount: number = this.rowCount;\r\n\r\n\t\t\tvar screenCols: number = this.screenRows;\r\n\t\t\tvar screenRows: number = this.screenCols;\r\n\t\t\tvar tileW: number = this.tileWidth;\r\n\t\t\tvar tileH: number = this.tileHeight;\r\n\t\t\tvar tileSize: number = tileW; // Assumes square tiles (!).  Fix me one day\r\n\t\t\tvar screenWidth: number = this.screenWidth;\r\n\t\t\tvar screenHeight: number = this.screenHeight;\r\n\r\n\t\t\tvar col0: number = centerCol - Math.floor(screenCols / 2);\r\n\t\t\tif (col0 < 0) {\r\n\t\t\t\tcol0 += colCount;\r\n\t\t\t}\r\n\t\t\tvar row0: number = centerRow - Math.floor(screenRows / 2);\r\n\t\t\tif (row0 < 0) {\r\n\t\t\t\trow0 += rowCount;\r\n\t\t\t}\r\n      \r\n\t\t\t// Center point of screen, in map x,y coordinates.\r\n\t\t\tvar cx: number = centerCol * tileW + dx + tileW / 2;\r\n\t\t\tvar cy: number = centerRow * tileH + dy + tileH / 2;\r\n      \r\n\t\t\t// Top-left of screen, in map x,y coordinates.\r\n\t\t\tvar x0: number = cx - screenWidth / 2;\r\n\t\t\tvar y0: number = cy - screenHeight / 2;\r\n\r\n\t\t\tvar topLeftCol: number = Math.floor(x0 / tileW);\r\n\t\t\tif ((x0 % tileSize) < 0) {\r\n\t\t\t\ttopLeftCol--;\r\n\t\t\t}\r\n\t\t\tvar tileEdgeX: number = topLeftCol * tileW;\r\n\r\n\t\t\tvar topLeftRow: number = Math.floor(y0 / tileH);\r\n\t\t\tif ((y0 % tileSize) < 0) { // e.g. is < 0 and not a multiple of tileSize\r\n\t\t\t\ttopLeftRow--;\r\n\t\t\t}\r\n\t\t\tvar tileEdgeY: number = topLeftRow * tileH; // getTileEdge(topLeftY);\r\n      \r\n\t\t\t// The view coordinates at which to start painting.\r\n\t\t\tvar startX: number = tileEdgeX - x0;\r\n\t\t\tvar _x: number = startX;\r\n\t\t\tvar startY: number = tileEdgeY - y0;\r\n\t\t\tvar _y: number = startY;\r\n\r\n\t\t\tif (topLeftCol < 0) {\r\n\t\t\t\ttopLeftCol += colCount;\r\n\t\t\t}\r\n\t\t\tif (topLeftRow < 0) {\r\n\t\t\t\ttopLeftRow += rowCount;\r\n\t\t\t}\r\n      \r\n\t\t\t// Paint until the end of the screen\r\n\t\t\tvar row: number = topLeftRow;\r\n\t\t\tvar layerCount: number = this.getLayerCount();\r\n\t\t\tvar tileCount: number = 0;\r\n\t\t\twhile (_y < screenHeight) {\r\n\t\t\t\tfor (var l: number = 0; l < layerCount; l++) {\r\n\r\n\t\t\t\t\tvar col: number = topLeftCol;\r\n\t\t\t\t\t_x = startX;\r\n\r\n\t\t\t\t\tvar layer: TiledLayer = this.getLayerByIndex(l);\r\n\t\t\t\t\tif (layer.visible) {\r\n\r\n\t\t\t\t\t\tvar prevOpacity: number;\r\n\t\t\t\t\t\tif (layer.opacity < 1) {\r\n\t\t\t\t\t\t\tprevOpacity = ctx.globalAlpha;\r\n\t\t\t\t\t\t\tctx.globalAlpha = prevOpacity * layer.opacity;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\twhile (_x < screenWidth) {\r\n\t\t\t\t\t\t\tvar value: number = layer.getData(row % rowCount, col % colCount);\r\n\t\t\t\t\t\t\tthis.drawTile(ctx, _x, _y, value, layer);\r\n\t\t\t\t\t\t\ttileCount++;\r\n\t\t\t\t\t\t\t_x += tileW;\r\n\t\t\t\t\t\t\tcol++;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (layer.opacity < 1) {\r\n\t\t\t\t\t\t\tctx.globalAlpha = prevOpacity;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n            \r\n\t\t\t\t\t// Here we could render sprites in-between layers\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_y += tileH;\r\n\t\t\t\trow++;\r\n\t\t\t}\r\n      \r\n\t\t\t//console.log('tileCount === ' + tileCount);\r\n\t\t}\r\n   \r\n\t\t/**\r\n\t\t * Returns a layer by name.\r\n\t\t * \r\n\t\t * @param {string} name The name of the layer.\r\n\t\t * @return {tiled.TiledLayer} The layer, or null if there is no layer with\r\n\t\t *         that name.\r\n\t\t * @method\r\n\t\t */\r\n\t\tgetLayer(name: string): TiledLayer {\r\n\t\t\treturn this.layersByName[name];\r\n\t\t}\r\n   \r\n\t\t/**\r\n\t\t * Returns a layer by index.\r\n\t\t * \r\n\t\t * @param {int} index The index of the layer.\r\n\t\t * @return {tiled.TiledLayer} The layer, or null if there is no layer at\r\n\t\t *         that index.\r\n\t\t * @method\r\n\t\t */\r\n\t\tgetLayerByIndex(index: number): TiledLayer {\r\n\t\t\treturn this.layers[index];\r\n\t\t}\r\n   \r\n\t\t/**\r\n\t\t * Returns the number of layers in this map.\r\n\t\t * \r\n\t\t * @return {int} The number of layers in this map.\r\n\t\t */\r\n\t\tgetLayerCount(): number {\r\n\t\t\treturn this.layers.length;\r\n\t\t}\r\n   \r\n\t\tprivate _getImageForGid(gid: number): TiledTileset {\r\n\t\t\tvar tilesetCount: number = this.tilesets.length;\r\n\t\t\tfor (var i: number = 0; i < tilesetCount; i++) {\r\n\t\t\t\tif (this.tilesets[i].firstgid > gid) {\r\n\t\t\t\t\treturn this.tilesets[i - 1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this.tilesets[tilesetCount - 1];\r\n\t\t}\r\n   \r\n\t\tdrawTile(ctx: CanvasRenderingContext2D, x: number, y: number,\r\n\t\t\t\tvalue: number, layer: TiledLayer) {\r\n\r\n\t\t\tif (value <= 0) { // 0 => no tile to draw\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar tileset: TiledTileset = this._getImageForGid(value);\r\n\t\t\tif (!tileset) {\r\n\t\t\t\tconsole.log('null tileset for: ' + value + ' (layer ' + layer.name + ')');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvalue -= tileset.firstgid;\r\n\t\t\tif (value < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar game: gtp.Game = window.game;\r\n\t\t\tvar img: gtp.Image = game.assets.getTmxTilesetImage(tileset);\r\n\r\n\t\t\tvar tileW: number = this.tileWidth;\r\n\t\t\tvar sw: number = tileW + tileset.spacing;\r\n\t\t\tvar tileH: number = this.tileHeight;\r\n\t\t\tvar sh: number = tileH + tileset.spacing;\r\n      \r\n\t\t\t// TODO: \"+ 1\" is based on extra space at end of image.  Should be configured/calculated\r\n\t\t\tvar imgColCount: number = Math.floor(img.width / sw);\r\n\t\t\tif (tileset.spacing > 0 && ((img.width % sw) === tileW)) {\r\n\t\t\t\timgColCount++;\r\n\t\t\t}\r\n\t\t\tvar imgY: number = Math.floor(value / imgColCount) * sh;\r\n\t\t\tvar imgX: number = (value % imgColCount) * sw;\r\n      \r\n\t\t\t//ctx.drawImage(img, imgX,imgY,tileW,tileH, x,y,tileW,tileH);\r\n\t\t\timg.drawScaled2(ctx, imgX, imgY, tileW, tileH, x, y, tileW, tileH);\r\n\r\n\t\t}\r\n   \r\n\t\tsetScale(scale: number) {\r\n\t\t\tthis.tileWidth *= scale;\r\n\t\t\tthis.tileHeight *= scale;\r\n\t\t\tthis.screenRows = Math.ceil(this.screenHeight / this.tileHeight);\r\n\t\t\tthis.screenCols = Math.ceil(this.screenWidth / this.tileWidth);\r\n\t\t\tvar tilesetCount: number = this.tilesets.length;\r\n\t\t\tfor (let i: number = 0; i < tilesetCount; i++) {\r\n\t\t\t\treturn this.tilesets[i].setScale(scale);\r\n\t\t\t}\r\n\t\t}\r\n   \r\n\t\t/**\r\n\t\t * Returns the pixel width of this map.\r\n\t\t * \r\n\t\t * @return {int} The pixel width of this map.\r\n\t\t * @method\r\n\t\t */\r\n\t\tgetPixelWidth(): number {\r\n\t\t\treturn this.colCount * this.tileWidth;\r\n\t\t}\r\n   \r\n\t\t/**\r\n\t\t * Returns the pixel height of this map.\r\n\t\t * \r\n\t\t * @return {int} The pixel height of this map.\r\n\t\t * @method\r\n\t\t */\r\n\t\tgetPixelHeight(): number {\r\n\t\t\treturn this.rowCount * this.tileHeight;\r\n\t\t}\r\n   \r\n\t\t/**\r\n\t\t * Removes a layer from this map.\r\n\t\t * @param {string} layerName The name of the layer to remove.\r\n\t\t * @return {boolean} Whether a layer by that name was found.\r\n\t\t * @method\r\n\t\t */\r\n\t\tremoveLayer(layerName: string): boolean {\r\n\t\t\tfor (let i: number = 0; i < this.layers.length; i++) {\r\n\t\t\t\tif (this.layers[i].name === layerName) {\r\n\t\t\t\t\tthis.layers.splice(i, 1);\r\n\t\t\t\t\tdelete this.layersByName[layerName];\r\n\t\t\t\t\tfor (let j: number = 0; j < this.objectGroups.length; j++) {\r\n\t\t\t\t\t\tif (this.objectGroups[j].name === layerName) {\r\n\t\t\t\t\t\t\tdelete this.objectGroups[j];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}","module tiled {\r\n\t'use strict';\r\n\r\n\texport class TiledObject {\r\n\r\n\t\tgid: number;\r\n\t\tx: number;\r\n\t\ty: number;\r\n\t\twidth: number;\r\n\t\theight: number;\r\n\t\tproperties: { };\r\n\r\n\t\tconstructor(data: any) {\r\n\t\t\tgtp.Utils.mixin(data, this);\r\n\t\t\tthis.properties = this.properties || {};\r\n\t\t\tthis.gid = this.gid || -1;\r\n\r\n\t\t\t// TODO: Remove\r\n\t\t\tvar game: gtp.Game = window.game;\r\n\t\t\tthis.x *= game._scale;\r\n\t\t\tthis.y  *= game._scale;\r\n\t\t\tthis.width *= game._scale;\r\n\t\t\tthis.height *= game._scale;\r\n\t\t}\r\n\r\n\t\tintersects(ox: number, oy: number, ow: number, oh: number) {\r\n\t\t\t'use strict';\r\n\t\t\t//console.log(this.name + \": \" + ox + ',' + oy + ',' + ow + ',' + oh +\r\n\t\t\t//      ' -> ' + this.x + ',' + this.y + ',' + this.width + ',' + this.height);\r\n\t\t\tvar tw: number = this.width;\r\n\t\t\tvar th: number = this.height;\r\n\t\t\tvar rw: number = ow;\r\n\t\t\tvar rh: number = oh;\r\n\t\t\tif (rw <= 0 || rh <= 0 || tw <= 0 || th <= 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar tx: number = this.x;\r\n\t\t\tvar ty: number = this.y;\r\n\t\t\tvar rx: number = ox;\r\n\t\t\tvar ry: number = oy;\r\n\t\t\trw += rx;\r\n\t\t\trh += ry;\r\n\t\t\ttw += tx;\r\n\t\t\tth += ty;\r\n\t\t\t//      overflow || intersect\r\n\t\t\treturn ((rw < rx || rw > tx) &&\r\n\t\t\t\t(rh < ry || rh > ty) &&\r\n\t\t\t\t(tw < tx || tw > rx) &&\r\n\t\t\t\t(th < ty || th > ry));\r\n\t\t}\r\n\t}\r\n}","module tiled {\r\n\t'use strict';\r\n\r\n\texport class TiledTileset {\r\n\r\n\t\tfirstgid: number;\r\n\t\timage: string;\r\n\t\timageWidth: number;\r\n\t\timageHeight: number;\r\n\t\tmargin: number;\r\n\t\tname: string;\r\n\t\tproperties: {};\r\n\t\tspacing: number;\r\n\t\ttileWidth: number;\r\n\t\ttileHeight: number;\r\n\r\n\t\tconstructor(data: any, imagePathModifier?: Function) {\r\n\t\t\tthis.firstgid = data.firstgid;\r\n\t\t\tthis.image = data.image;\r\n\t\t\tif (imagePathModifier) {\r\n\t\t\t\tthis.image = imagePathModifier(this.image);\r\n\t\t\t}\r\n\t\t\tthis.imageWidth = data.imagewidth;\r\n\t\t\tthis.imageHeight = data.imageheight;\r\n\t\t\tthis.margin = data.margin;\r\n\t\t\tthis.name = data.name;\r\n\t\t\tthis.properties = data.properties; // TODO\r\n\t\t\tthis.spacing = data.spacing;\r\n\t\t\tthis.tileWidth = data.tilewidth;\r\n\t\t\tthis.tileHeight = data.tileheight;\r\n\t\t}\r\n\r\n\t\tsetScale(scale: number) {\r\n\t\t\tthis.imageWidth *= scale;\r\n\t\t\tthis.imageHeight *= scale;\r\n\t\t\tthis.tileWidth *= scale;\r\n\t\t\tthis.tileHeight *= scale;\r\n\t\t\tthis.margin *= scale;\r\n\t\t\tthis.spacing *= scale;\r\n\t\t}\r\n\t}\r\n}"],"sourceRoot":"/source/"}